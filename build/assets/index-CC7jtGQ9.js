import{r as c,j as e,B as M,b as z,a as g,T as w,F as X,S as P,k as re,u as A,bP as ce,at as le,aP as _e,D as de,e as R,A as L,h as $,o as J,g as I,d as ie,au as oe,av as q}from"./index-CTtC1zcc.js";import{E}from"./editableCard-DRKBnIvM.js";import{P as H}from"./pagination-Dn5WTQBc.js";import{a as he,o as xe,b as ee,g as me,e as ue,c as ye,d as je,f as pe,t as ge,h as be,i as fe,j as ve,k as K,l as Se,m as Ce,n as ke,p as Ne,q as Te}from"./otchotAccountingSlice-CZ-b3Rwv.js";import{i as Pe,f as te}from"./capitalSelector-CEh7xca8.js";import{c as De,g as Ae,D as Y}from"./multiPageSelector-5hEFgVZ3.js";import{f as Fe,m as Ee}from"./multiPageSlice-Dy_bQnk9.js";import{g as Q}from"./searchSelector-CJfw-E7m.js";import{C as ae}from"./confirmModal-DQuz2eI0.js";import"./teachers-BWBVUtcH.js";import"./seq-aSd1TQlr.js";import{D as we}from"./deletedTeachers-Bh0rvD4L.js";import{L as Z}from"./link-BQL38z-k.js";import{u as Be}from"./index.esm-X1Z8qUg7.js";const Me="_main_1lfa0_1",Oe="_main__header_1lfa0_10",Le="_main__header__btn_1lfa0_16",$e="_main__header__article_1lfa0_28",Ie="_main__header__para_1lfa0_34",Ue="_main__card_1lfa0_39",qe="_main__card__header_1lfa0_50",ze="_main__card__header__span_1lfa0_55",Re="_main__card__header__content_1lfa0_65",He="_main__card__content_1lfa0_71",Ye="_main__card__content__box_1lfa0_77",Qe="_main__card__content__box__header_1lfa0_87",Je="_main__card__content__box__inner_1lfa0_107",Ke="_main__card__content__box__inner__sum_1lfa0_113",Ze="_main__card__content__box__inner__sum__handler_1lfa0_128",Ve="_main__summary_1lfa0_141",We="_main__summary__arounder_1lfa0_156",Ge="_main__summary__arounder__box_1lfa0_163",Xe="_main__summary__arounder__box__header_1lfa0_171",et="_extend_1lfa0_187",tt="_extend__headerBox_1lfa0_194",at="_extend__headerBox__header_1lfa0_203",st="_extend__headerBox__main_1lfa0_214",nt="_extend__headerBox__main__article_1lfa0_222",rt="_extend__headerBox__main__left_1lfa0_227",ct="_extend__headerBox__footer_1lfa0_237",lt="_extend__headerBox__footer__article_1lfa0_246",_t="_extend__table_1lfa0_251",dt="_extend__table__debt_1lfa0_258",it="_extend__table__debt__header_1lfa0_266",ot="_extend__table__debt__header__article_1lfa0_274",ht="_extend__table__debt__card_1lfa0_280",xt="_extend__table__debt__card__header_1lfa0_290",mt="_extend__table__debt__card__items_1lfa0_313",ut="_extend__table__debt__card__items__item_1lfa0_319",yt="_extend__table__credit_1lfa0_341",jt="_extend__table__credit__header_1lfa0_348",pt="_extend__table__credit__header__article_1lfa0_356",gt="_extend__table__credit__card_1lfa0_362",bt="_extend__table__credit__card__header_1lfa0_372",ft="_extend__table__credit__card__items_1lfa0_395",vt="_extend__table__credit__card__items__item_1lfa0_401",o={main:Me,main__header:Oe,main__header__btn:Le,main__header__article:$e,main__header__para:Ie,main__card:Ue,main__card__header:qe,main__card__header__span:ze,main__card__header__content:Re,main__card__content:He,main__card__content__box:Ye,main__card__content__box__header:Qe,main__card__content__box__inner:Je,main__card__content__box__inner__sum:Ke,main__card__content__box__inner__sum__handler:Ze,main__summary:Ve,main__summary__arounder:We,main__summary__arounder__box:Ge,main__summary__arounder__box__header:Xe,extend:et,extend__headerBox:tt,extend__headerBox__header:at,extend__headerBox__main:st,extend__headerBox__main__article:nt,extend__headerBox__main__left:rt,extend__headerBox__footer:ct,extend__headerBox__footer__article:lt,extend__table:_t,extend__table__debt:dt,extend__table__debt__header:it,extend__table__debt__header__article:ot,extend__table__debt__card:ht,extend__table__debt__card__header:xt,extend__table__debt__card__items:mt,extend__table__debt__card__items__item:ut,extend__table__credit:yt,extend__table__credit__header:jt,extend__table__credit__header__article:pt,extend__table__credit__card:gt,extend__table__credit__card__header:bt,extend__table__credit__card__items:ft,extend__table__credit__card__items__item:vt};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ct=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,d,l)=>l?l.toUpperCase():d.toLowerCase()),V=t=>{const s=Ct(t);return s.charAt(0).toUpperCase()+s.slice(1)},se=(...t)=>t.filter((s,d,l)=>!!s&&s.trim()!==""&&l.indexOf(s)===d).join(" ").trim(),kt=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=c.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:d=2,absoluteStrokeWidth:l,className:n="",children:x,iconNode:i,...m},_)=>c.createElement("svg",{ref:_,...Nt,width:s,height:s,stroke:t,strokeWidth:l?Number(d)*24/Number(s):d,className:se("lucide",n),...!x&&!kt(m)&&{"aria-hidden":"true"},...m},[...i.map(([r,p])=>c.createElement(r,p)),...Array.isArray(x)?x:[x]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=(t,s)=>{const d=c.forwardRef(({className:l,...n},x)=>c.createElement(Tt,{ref:x,iconNode:s,className:se(`lucide-${St(V(t))}`,`lucide-${t}`,l),...n}));return d.displayName=V(t),d};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Dt=U("calculator",Pt);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ft=U("dollar-sign",At);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],W=U("trending-down",Et);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],G=U("trending-up",wt);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Mt=U("users",Bt),Ot=({data:t})=>{const[s,d]=c.useState(!0),l=r=>new Intl.NumberFormat("uz-UZ",{style:"currency",currency:"UZS",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),n=r=>r.list.reduce((p,h)=>p+h.list.reduce((a,u)=>a+u.summa,0),0),x=(r,p=!1)=>{switch(r){case"studentsPayments":return{backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0"};case"teachersSalary":return{backgroundColor:"#eff6ff",border:" 1px solid #bfdbfe"};case"employeesSalary":return{backgroundColor:"#f5f3ff",border:" 1px solid #ddd6fe"};case"overhead":return{backgroundColor:"#fff7ed",border:" 1px solid #fed7aa"};case"capital":return{backgroundColor:"#fef2f2",border:" 1px solid #fecaca"};default:return{backgroundColor:"#f9fafb",border:"1px solid #e5e7eb"}}},i=r=>{switch(r){case"studentsPayments":return e.jsx("i",{style:{color:"black"},className:"fa-solid fa-graduation-cap"});case"teachersSalary":return e.jsx("i",{style:{color:"black"},className:"fa-solid fa-users"});case"employeesSalary":return e.jsx("i",{style:{color:"black"},className:"fa-solid fa-user-check"});case"overhead":return e.jsx("i",{style:{color:"black"},className:"fa-solid fa-building-shield"});case"capital":return e.jsx("i",{style:{color:"black"},className:"fa-solid fa-arrow-trend-up"});default:return e.jsx("i",{style:{color:"black"},className:"fa-solid fa-building-shield"})}};console.log(s,"active");const m=()=>t?.map((r,p)=>e.jsxs(E,{style:x(r.type,!0),extraClass:o.main__card,titleType:"",children:[e.jsxs("div",{className:o.main__card__header,children:[e.jsxs("span",{className:o.main__card__header__span,children:[i(r.type),e.jsx("h2",{children:r.name})]}),e.jsx("span",{className:o.main__card__header__content,children:e.jsxs("h3",{children:["Total: ",l(n(r))]})})]}),e.jsx("div",{className:o.main__card__content,children:r.list.map((h,a)=>e.jsxs(E,{extraClass:o.main__card__content__box,titleType:"",children:[e.jsxs("div",{className:o.main__card__content__box__header,children:[e.jsx("h2",{children:h.name}),e.jsxs("span",{children:[h.list[0]?.count||0," items"]})]}),e.jsx("div",{className:o.main__card__content__box__inner,children:h.list.map(u=>e.jsxs("div",{className:o.main__card__content__box__inner__sum,children:[e.jsx("h3",{children:"Amount"}),e.jsx("h4",{style:u.summa===0?{color:"#ccc"}:{color:"#39ae60"},children:l(u.summa)}),u.summa===0?e.jsx("span",{className:o.main__card__content__box__inner__sum__handler,children:"Ma'lumot topilmadi"}):null]}))})]}))})]})),_=()=>{const r=t?.filter(a=>a.type==="studentsPayments").reduce((a,u)=>a+n(u),0),p=t?.filter(a=>["teachersSalary","employeesSalary","overhead","capital"].includes(a.type)).reduce((a,u)=>a+n(u),0),h=r-p;return e.jsxs("div",{className:o.extend,children:[e.jsxs(E,{extraClass:o.extend__headerBox,titleType:"",children:[e.jsx("div",{className:o.extend__headerBox__header,children:e.jsx("h1",{children:"Umumiy ko'rsatkichlar"})}),e.jsxs("div",{className:o.extend__headerBox__main,children:[e.jsxs("div",{className:o.extend__headerBox__main__left,children:[e.jsx(G,{color:"#4CAF50"}),e.jsx("h1",{children:"Umumiy kirim"})]}),e.jsx("h1",{className:o.extend__headerBox__main__article,children:l(r)})]}),e.jsxs("div",{className:o.extend__headerBox__main,children:[e.jsxs("div",{className:o.extend__headerBox__main__left,children:[e.jsx(W,{color:"#EF4444"}),e.jsx("h1",{children:"Umumiy chiqim"})]}),e.jsx("h1",{style:{color:"#EF4444"},className:o.extend__headerBox__main__article,children:l(p)})]}),e.jsxs("div",{className:o.extend__headerBox__footer,children:[e.jsxs("div",{className:o.extend__headerBox__main__left,children:[e.jsx(Dt,{color:"#2563EB"}),e.jsx("h1",{children:"Sof foyda"})]}),e.jsxs("h1",{className:o.extend__headerBox__footer__article,children:[" ",l(h)]})]})]}),e.jsxs(E,{extraClass:o.extend__table,titleType:"",children:[e.jsxs("div",{className:o.extend__table__debt,children:[e.jsxs("div",{className:o.extend__table__debt__header,children:[e.jsx(G,{color:"#4CAF50"}),e.jsx("h1",{className:o.extend__table__debt__header__article,children:"Kirim"})]}),t?.filter(a=>a.type==="studentsPayments").map((a,u)=>e.jsxs(E,{extraClass:o.extend__table__debt__card,titleType:"",children:[e.jsxs("div",{className:o.extend__table__debt__card__header,children:[e.jsxs("span",{children:[e.jsx("div",{style:{background:"#22C55E",padding:"1rem",borderRadius:".5rem"},children:e.jsx(Mt,{color:"#FFFFFF"})}),e.jsx("h1",{children:a.name})]}),e.jsx("h1",{children:l(n(a))})]}),e.jsx("div",{className:o.extend__table__debt__card__items,children:a.list.map((b,k)=>e.jsxs("div",{className:o.extend__table__debt__card__items__item,children:[e.jsxs("span",{children:[e.jsx("h1",{children:b.name}),e.jsxs("h3",{children:[b.list[0]?.count||0," ta"]})]}),b.list.map(N=>e.jsx("h1",{style:{color:"#39ae60"},children:l(N.summa)}))]}))})]}))]}),e.jsxs("div",{className:o.extend__table__credit,children:[e.jsxs("div",{className:o.extend__table__credit__header,children:[e.jsx(W,{color:"#EF4444"}),e.jsx("h1",{className:o.extend__table__credit__header__article,children:"Chiqim"})]}),t?.filter(a=>["teachersSalary","employeesSalary","overhead","capital"].includes(a.type)).map((a,u)=>e.jsxs(E,{extraClass:o.extend__table__credit__card,titleType:"",children:[e.jsxs("div",{className:o.extend__table__credit__card__header,children:[e.jsxs("span",{children:[e.jsx("div",{style:{background:"#EF4444",padding:"1rem",borderRadius:".5rem"},children:e.jsx(Ft,{color:"#FFFFFF"})}),e.jsx("h1",{children:a.name})]}),e.jsx("h1",{children:l(n(a))})]}),e.jsx("div",{className:o.extend__table__credit__card__items,children:a.list.map((b,k)=>e.jsxs("div",{className:o.extend__table__credit__card__items__item,children:[e.jsxs("span",{children:[e.jsx("h1",{children:b.name}),e.jsxs("h3",{children:[b.list[0]?.count||0," ta"]})]}),b.list.map(N=>e.jsx("h1",{style:{color:"#EF4444"},children:l(N.summa)}))]}))})]}))]})]})]})};return e.jsxs("div",{className:o.main,children:[e.jsxs("div",{className:o.main__header,children:[e.jsxs("div",{className:o.main__header__box,children:[e.jsx("h1",{className:o.main__header__article,children:"Moliyaviy panel"}),e.jsx("p",{className:o.main__header__para,children:"Barcha filiallar bo'yicha to'lovlar va xarajatlarning umumiy ko'rinishi"})]}),e.jsx(M,{onClick:()=>d(!s),extraClass:o.main__header__btn,children:s&&s?"Kirim/Chiqim 🔄":"Yopish"})]}),s?e.jsxs(e.Fragment,{children:[m(),e.jsxs(E,{extraClass:o.main__summary,titleType:"",children:[e.jsx("h1",{children:"Moliyaviy xulosa"}),e.jsx("div",{className:o.main__summary__arounder,children:t?.map((r,p)=>e.jsxs(E,{extraClass:o.main__summary__arounder__box,titleType:"",children:[e.jsxs("span",{className:o.main__summary__arounder__box__header,children:[i(r.type),e.jsx("h2",{children:r.name})]}),e.jsx("h3",{children:l(n(r))})]},p))})]})]}):_()]})},Lt="_empSalary_1ptrr_1",$t="_cash_1ptrr_5",It="_changeType_1ptrr_24",O={empSalary:Lt,cash:$t,changeType:It},Ut=({changingData:t,filteredSalary:s,sum2:d,formatSalary:l,onChange:n,changePayment:x,setChangePayment:i,setChangingData:m,setActiveDelete:_,activeDelete:r,getCapitalType:p})=>{const h=z(),a=g(Q);let u=c.useMemo(()=>50,[]);const[b,k]=c.useState([]),[N,T]=c.useState(1),[B,v]=c.useState(null),y=c.useMemo(()=>{const j=s?.slice();return T(1),a?j.filter(D=>D?.user?.name.toLowerCase().includes(a.toLowerCase())):j},[s,T,a]),S=b?.map((j,D)=>e.jsx(e.Fragment,{children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:D+1}),e.jsxs("td",{onClick:()=>h(`../../employer/employerProfile/${j?.user?.id}`),children:[j?.user?.name," ",j.user.surname]}),e.jsx("td",{children:j?.salary}),e.jsx("td",{children:j?.date}),e.jsx("td",{children:j?.user?.job?.length?j?.user?.job:"ish turi mavjud emas"}),e.jsx("td",{children:e.jsx("div",{onClick:()=>{m({id:j.id,name:j.user.name,surname:j.user.surname,payment_types:j.payment_types.name,item:j}),v({payment_types:j.payment_types}),i(!0)},className:O.cash,children:j?.payment_types?.name})}),e.jsx("td",{children:e.jsx("div",{children:e.jsx(M,{onClick:()=>{_(!0),m({id:j.id,name:j.user.name,surname:j.user.surname,payment_types:j.payment_types.name})},type:"delete",children:e.jsx("i",{className:"fa fa-times",style:{color:"white"}})})})})]})})}));return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:O.empSalary,children:[e.jsxs(w,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"Kasb"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"O'chirish"})]})}),S]}),e.jsxs(X,{active:x,setActive:i,children:[e.jsx("h2",{children:"To'lov turini uzgartirish"}),e.jsx("div",{className:O.changeType,children:e.jsx(P,{options:p,onChangeOption:n})})]})]}),e.jsx(H,{setCurrentTableData:k,users:y,setCurrentPage:T,currentPage:N,pageSize:u,onPageChange:j=>{T(j)},type:"custom"})]})},qt=({teacherSalary:t,onDelete:s,deleted:d,setChangePayment:l,setChangingData:n,changePayment:x,setActiveDelete:i,changingData:m,activeDelete:_})=>{t?.filter(y=>!y.deleted);const r=g(Q);let p=c.useMemo(()=>50,[]);const[h,a]=c.useState([]),[u,b]=c.useState(1),k=c.useMemo(()=>{const y=t?.slice();return b(1),r?y.filter(F=>F?.teacher?.user?.name?.toLowerCase().includes(r.toLowerCase())):y},[t,b,r]),N=y=>{i(!0)},T=z(),v=h?.map((y,F)=>e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:F+1}),e.jsxs("td",{onClick:()=>T(`../../teacher/teacherProfile/${y?.teacher?.id}`,{relative:"path"}),children:[y?.teacher?.user?.name," ",y?.teacher?.user?.surname]}),e.jsx("td",{children:y?.salary}),e.jsx("td",{children:y?.comment}),e.jsx("td",{children:y?.date}),e.jsx("td",{onClick:()=>{n({id:y?.id,payment:y?.payment}),l(!0)},children:e.jsx("div",{style:{border:"1px solid",width:"fit-content",padding:"5px 10px",borderRadius:"15px",textTransform:"capitalize",cursor:"pointer"},children:y?.payment?.name})}),e.jsx("td",{children:e.jsx("div",{children:e.jsx(M,{onClick:()=>{N({id:y?.id,name:y?.teacher?.user?.name,surname:y?.teacher?.user?.surname}),n({id:y?.id,name:y?.teacher?.user?.name,surname:y?.teacher?.user?.surname})},type:"delete",children:e.jsx("i",{className:"fa fa-times",style:{color:"white"}})})})})]},y.id)}));return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{height:"calc(100vh - 43rem)",overflow:"auto"},children:e.jsxs(w,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sabab"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"O'chirish"})]})}),v]})}),e.jsx(H,{setCurrentTableData:a,users:k,setCurrentPage:b,currentPage:u,pageSize:p,onPageChange:y=>{b(y)},type:"custom"})]})},zt=t=>t.accountingSlice?.pages,Rt=t=>t.accountingSlice?.activePage,Ht=t=>t.accountingSlice?.accountingPages,Yt=t=>t.accountingSlice?.encashment,Qt=t=>t.employerSlice?.employerSalary,Jt=t=>t.employerSlice?.loading,Kt=t=>t.employerSlice?.deletedEmployerSalary,Zt=({teacherSalary:t,formatSalary:s})=>{const l=t?.salary?.map((n,x)=>e.jsxs("tr",{children:[e.jsx("td",{children:x+1}),e.jsxs("td",{children:[n?.name," ",n?.surname]}),e.jsx("td",{children:n?.phone}),e.jsx("td",{children:n?.subject}),e.jsx("td",{children:s(n?.total_salary)}),e.jsx("td",{children:s(n?.taken_salary)}),e.jsx("td",{children:s(n?.remaining_salary)}),e.jsx("td",{children:s(n.cash)}),e.jsx("td",{children:s(n.bank)}),e.jsx("td",{children:s(n.click)})]}));return e.jsx("div",{children:e.jsxs(w,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Telefon numer"}),e.jsx("th",{children:"Fan"}),e.jsx("th",{children:"Umimiy oylik"}),e.jsx("th",{children:"Olingan oylik"}),e.jsx("th",{children:"Qolgan oylik"}),e.jsx("th",{children:"Cash"}),e.jsx("th",{children:"Bank"}),e.jsx("th",{children:"Click"})]})}),e.jsx("tbody",{children:l})]})})},Vt=({employerSalary:t,formatSalary:s})=>{const l=t?.salary?.map((n,x)=>e.jsxs("tr",{children:[e.jsx("td",{children:x+1}),e.jsxs("td",{children:[n?.name," ",n?.surname]}),e.jsx("td",{children:n?.phone}),e.jsx("td",{children:n?.subject}),e.jsx("td",{children:s(n?.total_salary)}),e.jsx("td",{children:s(n?.taken_salary)}),e.jsx("td",{children:s(n?.remaining_salary)}),e.jsx("td",{children:s(n.cash)}),e.jsx("td",{children:s(n.bank)}),e.jsx("td",{children:s(n.click)})]}));return e.jsx("div",{children:e.jsxs(w,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Telefon numer"}),e.jsx("th",{children:"Fan"}),e.jsx("th",{children:"Umimiy oylik"}),e.jsx("th",{children:"Olingan oylik"}),e.jsx("th",{children:"Qolgan oylik"}),e.jsx("th",{children:"Cash"}),e.jsx("th",{children:"Bank"}),e.jsx("th",{children:"Click"})]})}),e.jsx("tbody",{children:l})]})})},Wt=({classes:t,extraClass:s,extraClassTable:d,format:l})=>{const x=t?.class?.map((i,m)=>e.jsxs(e.Fragment,{children:[i.students.length>=1?e.jsxs("h2",{className:s,children:[i.class_number," ",i.class_color]}):null,i?.students.map((_,r)=>e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:r+1}),e.jsxs("td",{children:[_.name," ",_.surname]}),e.jsx("td",{children:_.phone}),e.jsx("td",{children:l(_.total_debt)}),e.jsxs("td",{children:["-",l(_.remaining_debt)]}),e.jsx("td",{children:l(_.total_dis)}),e.jsx("td",{children:l(_.total_discount)}),e.jsx("td",{children:l(_.cash)}),e.jsx("td",{children:l(_.bank)}),e.jsx("td",{children:l(_.click)})]})}))]}));return e.jsx("div",{className:d,children:e.jsxs(w,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Tel raqami"}),e.jsx("th",{children:"Oylik qarz"}),e.jsx("th",{children:"Qolgan qarz"}),e.jsx("th",{children:"Chegirma (1-yillik)"}),e.jsx("th",{children:"Chegirma (1-martalik)"}),e.jsx("th",{children:"Cash"}),e.jsx("th",{children:"Bank"}),e.jsx("th",{children:"Click"})]})}),x]})})},Gt="_changeType_1ek25_54",Xt={changeType:Gt},ea={isDelete:!1,isArchive:!1},ta=re({name:"accountingFilterSlice",initialState:ea,reducers:{fetchIsDelete:(t,s)=>{t.isDelete=s.payload},fetchIsArchive:(t,s)=>{t.isArchive=s.payload}}}),{fetchIsDelete:es,fetchIsArchive:ts}=ta.actions,aa={accountingSlice:ee,multiPageSlice:Ee},as=()=>{const t=g(zt),s=z(),d=A(),[l,n]=c.useState(!1),[x,i]=c.useState(!1),[m,_]=c.useState(!1),[r,p]=c.useState(!1);g(Yt);const h=g(Rt),a=g(De),u=g(ce),b=g(le),k=g(Ae);_e();const[N,T]=c.useState(!1),[B,v]=c.useState(h??t?.[0]?.value??""),y=localStorage.getItem("selectedBranch");console.log(k,"ffff"),c.useEffect(()=>{d(he({branchID:y})),d(Pe())},[]),c.useCallback(S=>{d(xe({value:S}))},[s]),c.useEffect(()=>{a&&a!==u.length&&u.length>=2&&s("./",{relative:"path"})},[a,u?.length]);const F=c.useMemo(()=>[{name:"Students Payments",type:"studentsPayments"},{name:"Teacher Salary",type:"teachersSalary"},{name:"Employer Salary",type:"employeesSalary"},{name:"overhead",type:"overhead"},{name:"capital",type:"capital"}],[]);return c.useEffect(()=>{d(Fe({locations:b,types:F}))},[u.length]),console.log(k,"multi"),e.jsx(Y,{reducers:aa,children:e.jsx(Ot,{data:k})})},sa=({filteredDeletedSalary:t,formatSalary:s,sum2:d,onChange:l})=>{const n=g(Q);let x=c.useMemo(()=>50,[]);const[i,m]=c.useState([]),[_,r]=c.useState(1),p=c.useMemo(()=>{const a=t?.slice();return r(1),n?a.filter(u=>u.name?.toLowerCase().includes(n.toLowerCase())):a},[t,r,n]),h=()=>i?.map((a,u)=>e.jsx(e.Fragment,{children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:u+1}),e.jsx("td",{children:a?.user?.name}),e.jsx("td",{children:a?.salary}),e.jsx("td",{children:a?.date}),e.jsx("td",{children:a?.user?.job?.length?a?.user?.job:"ish turi mavjud emas"}),e.jsx("td",{onClick:()=>l(a.id),children:e.jsx("div",{className:O.cash,children:a?.payment_types?.name})})]})})}));return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:O.empSalary,children:e.jsxs(w,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"Kasb"}),e.jsx("th",{children:"To'lov turi"})]})}),h()]})}),e.jsx(H,{setCurrentTableData:m,users:p,setCurrentPage:r,currentPage:_,pageSize:x,onPageChange:a=>{r(a)},type:"custom"})]})},na={employerSlice:ue},ss=c.memo(({deleted:t,setDeleted:s})=>{const d=A(),[l,n]=c.useState(!1),[x,i]=c.useState(!1),m=g(Qt),_=g(Kt),r=g(Jt),{request:p}=R(),[h,a]=c.useState(!1),u=localStorage.getItem("selectedBranch");c.useEffect(()=>{d(me(u))},[]);const[b,k]=c.useState({}),N=g(te),T=_?.reduce((S,j)=>S+parseFloat(j.salary||0),0),B=m?.reduce((S,j)=>S+parseFloat(j.salary||0),0),v=S=>Number(S).toLocaleString(),y=S=>{const{id:j}=b;p(`${L}Users/salaries/delete/${j}/`,"DELETE",JSON.stringify(j),$()).then(D=>{a(!h),d(je({id:j})),d(J({status:!0,msg:D.msg,type:"success"}))}).catch(D=>{console.log(D)})},F=S=>{const{id:j}=b;p(`${L}Users/salaries/update/${j}/`,"PATCH",JSON.stringify({payment_types:Number(S)}),$()).then(D=>{n(!1),d(ye({id:j,payment_types:N.filter(ne=>ne.id===+S)[0],changingData:b}))}).catch(D=>{console.log(D)})};return r?e.jsx(de,{}):e.jsx(Y,{reducers:na,children:e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"flex-end",marginBottom:"3rem"},children:e.jsxs("div",{style:{color:"rgb(34, 197, 94)",fontSize:"2.2rem",textAlign:"end"},children:["Total : ",v(t?T:B)]})}),t?e.jsx(sa,{filteredDeletedSalary:_,formatSalary:v}):e.jsx(Ut,{changingData:b,formatSalary:v,filteredSalary:m,setChangingData:k,changePayment:l,activeDelete:h,setActiveDelete:a,setChangePayment:n,getCapitalType:N,onChange:F}),e.jsx(ae,{setActive:a,active:h,onClick:y,title:`Rostanham ${b.name} ni o'chirmoqchimisiz `,type:"danger"})]})})}),ra=t=>t.teacher?.teacherSalary,ca=t=>t.teacher?.deletedSalary,la=({deletedTeacher:t,setChangePayment:s,setChangingData:d})=>{const l=g(Q);let n=c.useMemo(()=>50,[]);const[x,i]=c.useState([]),[m,_]=c.useState(1),r=c.useMemo(()=>{const h=t?.slice();return _(1),l?h.filter(a=>a.name?.toLowerCase().includes(l.toLowerCase())):h},[we,_,l]),p=()=>x.map((h,a)=>e.jsx(e.Fragment,{children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:a+1}),e.jsxs("td",{children:[h?.teacher?.user?.name," ",h?.teacher?.user?.surname]}),e.jsx("td",{children:h?.salary}),e.jsx("td",{children:h?.comment}),e.jsx("td",{children:h?.date}),e.jsx("td",{onClick:()=>{d({id:h?.id,payment_types:h?.payment_types})},children:e.jsx("div",{style:{border:"1px solid",width:"fit-content",padding:"5px 10px",borderRadius:"15px",textTransform:"capitalize",cursor:"pointer"},children:h?.payment?.name})})]},a)})}));return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("div",{style:{height:"calc(100vh - 43rem)",overflow:"auto"},children:e.jsxs(w,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sabab"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"To'lov turi"})]})}),p()]})})}),e.jsx(H,{setCurrentTableData:i,users:r,setCurrentPage:_,currentPage:m,pageSize:n,onPageChange:h=>{_(h)},type:"custom"})]})},_a={teacher:ge},ns=({deleted:t,setDeleted:s})=>{const d=A(),l=g(ra),n=g(ca),[x,i]=c.useState({}),[m,_]=c.useState(!1),r=g(te),[p,h]=c.useState(!1),a=localStorage.getItem("selectedBranch"),{request:u}=R();c.useEffect(()=>{a&&d(pe(a))},[a]);const b=()=>{const{id:v}=x;u(`${L}Teachers/teachers/salary/delete/${v}/`,"DELETE",JSON.stringify({id:v}),$()).then(y=>{d(be({id:v})),d(J({status:!0,msg:y.msg,type:"success"})),h(!1)}).catch(y=>{console.log(y)})},k=v=>Number(v).toLocaleString(),N=n?.reduce((v,y)=>v+parseFloat(y.salary||0),0),T=l?.reduce((v,y)=>v+parseFloat(y.salary||0),0),B=v=>{d(fe({id:x.id,payment_types:v})),_(!1)};return e.jsxs(Y,{reducers:_a,children:[e.jsx("div",{style:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"flex-end",marginBottom:"3rem"},children:e.jsxs("div",{style:{color:"rgb(34, 197, 94)",fontSize:"2.2rem",textAlign:"end"},children:["Total : ",k(t?N:T)]})}),t?e.jsx(la,{setChangingData:i,setChangePayment:_,deletedTeacher:n}):e.jsx(qt,{setChangingData:i,changePayment:m,setChangePayment:_,deleted:t,teacherSalary:l,changingData:x,activeDelete:p,setActiveDelete:h}),e.jsx(ae,{setActive:h,active:p,onClick:b,title:`Rostanham ${x.name} ni o'chirmoqchimisiz `,type:"danger"}),e.jsx(X,{active:m,setActive:_,children:e.jsx("div",{className:Xt.changeType,children:e.jsx(P,{options:r,onChangeOption:B,title:"Select payment type"})})})]})},da="_accounting_1omdx_1",ia="_accounting__wrapper_1omdx_4",oa="_wrapper__filter_1omdx_9",ha="_wrapper__middle_1omdx_13",xa="_typeExpenses_1omdx_33",ma="_paymentType_1omdx_50",ua="_select_1omdx_57",ya="_tableHeader_1omdx_61",ja="_table_1omdx_61",pa="_otchot__main_1omdx_75",ga="_otchot_1omdx_75",f={accounting:da,accounting__wrapper:ia,wrapper__filter:oa,wrapper__middle:ha,typeExpenses:xa,paymentType:ma,select:ua,tableHeader:ya,table:ja,otchot__main:pa,otchot:ga},ba=t=>t.otchotAccountingSlice?.students,fa=t=>t.otchotAccountingSlice?.teacherSalary,va=t=>t.otchotAccountingSlice?.employerSalary,Sa=t=>t.otchotAccountingSlice.all,Ca=({formatSalary:t})=>{const s=A(),d=g(I),l=g(va),n=d.id;c.useEffect(()=>{s(ve(n))},[]);const[x,i]=c.useState(null),[m,_]=c.useState(null);return e.jsx("div",{children:e.jsxs("div",{children:[e.jsxs("div",{className:f.paymentType,children:[e.jsx(P,{extraClass:f.select,options:l.dates?.map(r=>r.year),onChangeOption:_}),m?e.jsx(P,{extraClass:f.select,options:l.dates.filter(r=>r.year===+m)[0].months,onChangeOption:i}):null]}),e.jsx(Vt,{formatSalary:t,employerSalary:l})]})})},ka=({formatSalary:t})=>{const s=g(ba),[d,l]=c.useState(null),[n,x]=c.useState(null),i=A(),{register:m,handleSubmit:_}=Be(),[r,p]=c.useState(null),{request:h}=R(),a=g(I);return c.useEffect(()=>{i(K(a.id)),n&&d&&h(`${L}Encashment/student_payments/?branch=${a.id}`,"POST",JSON.stringify({year:n,month:d}),$()).then(u=>{i(K(a.id)),p(u)}).catch(u=>{i(J({status:"error",type:!0,msg:"Serverda hatolik"}))})},[n,d]),e.jsxs("div",{children:[e.jsxs("div",{className:f.paymentType,children:[e.jsxs("div",{style:{display:"flex",gap:"2rem"},children:[e.jsx(P,{register:m,extraClass:f.select,name:"year",options:s?.dates?.map(u=>u?.year),onChangeOption:x}),n?e.jsx(P,{register:m,name:"month",extraClass:f.select,options:s?.dates?.filter(u=>u.year===+n)[0]?.months,onChangeOption:l}):null]}),e.jsxs("div",{className:f.otchot__main,children:[e.jsxs("div",{className:f.otchot,children:["Umumiy qarz ",e.jsx("br",{})," ",t(r?r?.total_debt:s?.total_debt)]}),e.jsxs("div",{className:f.otchot,children:["Qolgan qarz ",e.jsx("br",{})," ",t(r?r?.reaming_debt:s?.reaming_debt)]}),e.jsxs("div",{className:f.otchot,children:["Chegirma 1-yillik ",e.jsx("br",{})," ",t(r?r?.total_dis:s?.total_dis)]}),e.jsxs("div",{className:f.otchot,children:["Chegirma 1-martalik  ",e.jsx("br",{})," ",t(r?r?.total_discount:s?.total_discount)]}),e.jsxs("div",{className:f.otchot,children:["Umumiy to'lov ",e.jsx("br",{})," ",t(r?r?.total_sum:s?.total_sum)]})]})]}),e.jsx(Wt,{format:t,extraClass:f.tableHeader,extraClassTable:f.table,classes:r||s})]})},Na=({formatSalary:t})=>{const s=A(),l=g(I).id,n=g(fa);c.useEffect(()=>{s(Se(l))},[]);const[x,i]=c.useState(null),[m,_]=c.useState(null);return e.jsx("div",{children:e.jsxs("div",{children:[e.jsxs("div",{className:f.paymentType,children:[e.jsx(P,{extraClass:f.select,options:n?.dates?.map(r=>r?.year),onChangeOption:_}),m?e.jsx(P,{extraClass:f.select,options:n.dates.filter(r=>r.year===+m)[0]?.months,onChangeOption:i}):null]}),e.jsx(Zt,{formatSalary:t,teacherSalary:n})]})})},Ta="_paymentTypes_bhdlr_1",Pa="_paymentTypes__item_bhdlr_8",Da="_list_bhdlr_15",Aa="_list__container_bhdlr_24",Fa="_otchot_bhdlr_28",Ea="_header_bhdlr_36",wa="_header__item_bhdlr_43",Ba="_active_bhdlr_50",C={paymentTypes:Ta,paymentTypes__item:Pa,list:Da,list__container:Aa,otchot:Fa,header:Ea,header__item:wa,active:Ba},Ma=[{name:"O'quvchilar",value:"student"},{name:"O'qituvchilar",value:"teacher"},{name:"Qo'shimcha harajatlar ",value:"overhead"},{name:"Capital",value:"capital"},{name:"Umumiy foyda",value:"total"}],Oa=({allTable:t})=>{const{request:s}=R(),d=A(),l=g(I),[n,x]=c.useState("student"),[i,m]=c.useState(null),[_,r]=c.useState(null),p=()=>{if(console.log(t?.payment_results),!(!n&&!t?.payment_results))return e.jsx(La,{data:t?.payment_results?.[n],activeType:n})};c.useEffect(()=>{if(_&&i){const a={year:i,month:_};s(`${L}Encashment/encashment_school/`,"POST",JSON.stringify({branch:l.id,...a}),$()).then(u=>{d(Ce(u)),console.log(u)})}},[l.id,i,_]);const h=a=>{m(a),r(null)};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"2rem"},children:[e.jsx(P,{options:t?.dates?.map(a=>({name:a?.year,id:a?.year})),onChangeOption:h}),i&&e.jsx(P,{options:t?.dates?.filter(a=>a.year===+i)[0]?.months,onChangeOption:r,defaultValue:t?.dates?.filter(a=>a.year===+i)[0]?.months[0]})]}),e.jsx("div",{className:C.header,children:Ma.map(a=>e.jsx("div",{className:ie(C.header__item,{[C.active]:a.value===n}),onClick:()=>x(a.value),children:a.name},a.value))}),p()]})},La=({data:t,activeType:s})=>{const[d,l]=c.useState(null);c.useEffect(()=>{t&&(Array.isArray(t)?l("array"):l("object"))},[t]);const n=c.useCallback(i=>{if(!(!i.length>0))return i.map((m,_)=>{const r=Object.keys(m);return e.jsxs("div",{className:C.paymentTypes__item,children:[e.jsx("h3",{children:m[r[0]]}),e.jsx("p",{children:m[r[1].toLowerCase()]})]},_)})},[]),x=c.useCallback(()=>{if(!(!t&&!d))return Object.entries(t).map((i,m)=>{if(Array.isArray(i[1]))return i[1].map((_,r)=>{const p=Object.keys(_);return e.jsxs("div",{className:C.paymentTypes__item,children:[e.jsx("h3",{children:_[p[0]]}),e.jsx("p",{children:_[p[1].toLowerCase()]})]},r)})})},[t,d]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:C.paymentTypes,children:[d==="array"?n(t):null,x()]}),s==="student"?e.jsx("div",{className:C.list,children:e.jsxs("div",{className:C.list__container,children:[e.jsxs("div",{className:C.otchot,children:["Qolgan qarz ",e.jsx("br",{})," ",t?.remaining_debt]}),e.jsxs("div",{className:C.otchot,children:["Umumiy qarz ",e.jsx("br",{})," ",t?.total_debt]})]})}):s==="teacher"?e.jsx("div",{className:C.list,children:e.jsxs("div",{className:C.list__container,children:[e.jsxs("div",{className:C.otchot,children:["Umumiy oylik ",e.jsx("br",{})," ",t?.total_salary]}),e.jsxs("div",{className:C.otchot,children:["Qolgan oylik ",e.jsx("br",{})," ",t?.remaining_salary]})]})}):null]})},$a=()=>{const t=A(),s=g(I),d=g(Sa);c.useEffect(()=>{t(ke({branchId:s.id}))},[]);const[l,n]=c.useState(null),[x,i]=c.useState(null);return e.jsx("div",{children:e.jsx(Oa,{allTable:d})})},Ia={otchotAccountingSlice:Te,accountingSlice:ee},rs=()=>{const t=_=>Number(_).toLocaleString(),s=g(Ht),[d,l]=c.useState(!1),n=A(),x=localStorage.getItem("selectedBranch"),i=z(),m=c.useCallback(_=>{n(Ne({value:_})),i(`${_}`,{relative:"path"})},[i]);return e.jsx(Y,{reducers:Ia,children:e.jsxs("div",{className:f.accounting,children:[e.jsxs("div",{className:f.accounting__wrapper,children:[e.jsxs("div",{className:f.wrapper__filter,children:[e.jsx(M,{type:"filter",status:"filter",onClick:()=>l(!d),children:"Filter"}),e.jsx(P,{defaultValue:s[0]?.value,options:s,onChangeOption:m})]}),e.jsx("div",{className:f.wrapper__middle,children:e.jsxs("div",{className:f.typeExpenses,children:[e.jsx(Z,{to:`../inkasatsiya/${x}`,children:e.jsx(M,{children:"Inkasatsiya"})}),e.jsx(Z,{to:"../accounting",children:e.jsx(M,{type:"filter",children:"buxgalteriya"})})]})})]}),e.jsxs(oe,{children:[e.jsx(q,{path:"all",element:e.jsx($a,{})}),e.jsx(q,{path:"payment",element:e.jsx(ka,{formatSalary:t})}),e.jsx(q,{path:"teacherSalary",element:e.jsx(Na,{formatSalary:t})}),e.jsx(q,{path:"employerSalary",element:e.jsx(Ca,{formatSalary:t})})]})]})})};export{rs as AccountingOtchotPage,as as AccountingPageMain,ss as EmployerSalaryPage,ns as TeacherSalaryPage};
