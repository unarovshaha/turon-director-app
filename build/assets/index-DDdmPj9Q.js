import{r as t,u as v,a as p,j as e,T,B as g,k as G,R,F as $,I as F,S as I,_ as V,ax as K,D as q}from"./index-BEMsgrdT.js";import{g as N,a as J}from"./selectors-DKdp24P0.js";import{P as O}from"./pagination-BpSo2iSn.js";import{L as Q}from"./link-DtgHQwc3.js";import{v as f}from"./vacancyPageAddThunk-BxVrkb2s.js";import{V as U}from"./vacancyPageEdit-DijO9e6e.js";import{g as W}from"./searchSelector-CJfw-E7m.js";import"./editableCard-DlgsnufH.js";import"./workerSelect-DLyD-aiQ.js";import"./TransitionGroupContext-CXeTsCR6.js";import"./TransitionGroup-D1Qx5dKb.js";import"./Transition-BWmB4V01.js";import"./index.esm-DWlg3cF3.js";const X="_deletedGroups_zgp8m_1",Y="_mainContainer_filterPanelBox_zgp8m_1",Z="_mainContainer_buttonPanelBox_zgp8m_35",ee="_mainContainer_buttonPanelBox_leftCreateButton_zgp8m_42",ae="_mainContainer_tablePanelBox_zgp8m_78",te="_buttonHelper_zgp8m_93",u={deletedGroups:X,mainContainer_filterPanelBox:Y,mainContainer_buttonPanelBox:Z,mainContainer_buttonPanelBox_leftCreateButton:ee,mainContainer_tablePanelBox:ae,buttonHelper:te},ne="_anotherDiv_1wz17_9",se="_theadBody_1wz17_22",oe="_buttonHelper_1wz17_28",re="_otClick_1wz17_36",C={anotherDiv:ne,theadBody:se,buttonHelper:oe,otClick:re},ce=t.memo(({currentTableData:r,currentPage:a,PageSize:o,editMode:l,onEditClick:m})=>{v(),p(N);const i=()=>r?.map((n,d)=>e.jsxs("tr",{children:[e.jsx("td",{children:d+1}),e.jsx(Q,{to:`vacancyWorkPage/${n.group.id}`,children:e.jsx("td",{className:C.otClick,children:n.group.name})}),e.jsx("td",{children:e.jsx("div",{className:C.anotherDiv,children:n.system_id.name})}),!l&&e.jsx("td",{children:e.jsx(g,{extraClass:C.buttonHelper,children:e.jsx("i",{className:"fas fa-pencil"}),onClick:()=>m(n)})})]},n.id));return e.jsxs(T,{children:[e.jsx("thead",{className:C.theadBody,children:e.jsxs("tr",{children:[e.jsx("th",{children:"â„–"}),e.jsx("th",{children:"Kasblar nomi"}),e.jsx("th",{children:"System turi"}),!l&&e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:i()})]})}),le="_filter_189ur_1",ie="_filter__container_189ur_7",de="_filter__select_189ur_13",ue="_buttonChange_189ur_51",x={filter:le,filter__container:ie,filter__select:de,buttonChange:ue},_e={vacancies:[],loading:!1,error:null},me=G({name:"vacancies",initialState:_e,reducers:{addVacancy:(r,a)=>{r.vacancies.push(a.payload)}},extraReducers:r=>{r.addCase(f.pending,a=>{a.loading=!0,a.error=null}).addCase(f.fulfilled,(a,o)=>{a.loading=!1,a.vacancies.push(o.payload)}).addCase(f.rejected,(a,o)=>{a.loading=!1,a.error=o.payload??null})}}),{addVacancy:he}=me.actions,xe=R.memo(({active:r,setActive:a,systems:o})=>{const[l,m]=t.useState(""),[i,n]=t.useState(""),d=v(),j=()=>{d(f({name:l,system_id:i})).then(h=>{f.fulfilled.match(h)?d(he(h.payload)):console.error("Failed to add vacancy:",h.error)}),d(V()),a(!1)};return e.jsx($,{active:r,setActive:a,children:e.jsxs("div",{className:x.filter,children:[e.jsx("h1",{children:"Vakansiya qo'shish"}),e.jsxs("div",{className:x.filter__container,children:[e.jsx(F,{extraClassName:x.filter__select,placeholder:"Kasb nomi",value:l,onChange:c=>m(c.target.value)}),e.jsx(I,{extraClass:x.filter__select,value:i,onChangeOption:c=>n(c),options:o}),e.jsx(g,{extraClass:x.buttonChange,onClick:j,children:"Qo'shish"})]})]})})}),ke=()=>{const[r,a]=t.useState(!1),[o,l]=t.useState(!1),[m,i]=t.useState(!1),n=p(W);let d=t.useMemo(()=>10,[]);const[j,c]=t.useState([]),[h,y]=t.useState(1),[k,b]=t.useState(!1),[z,w]=t.useState(null),D=v(),P=p(N),H=p(J),B=p(K),E=t.useMemo(()=>{const s=P.slice();return y(1),n?s.filter(_=>_?.group?.name?.toLowerCase().includes(n.toLowerCase())||_?.system_id?.name?.toLowerCase().includes(n.toLowerCase())):s},[P,n]);t.useEffect(()=>{D(V())},[]);const L=s=>{w(s),b(!0)},A=s=>{c(_=>_.map(S=>S.id===s.id?s:S)),b(!1)},M=s=>{c(_=>[..._,{id:Date.now(),...s}])};return H?e.jsx(q,{}):e.jsxs("div",{className:u.deletedGroups,children:[e.jsx("div",{className:u.mainContainer_filterPanelBox}),e.jsxs("div",{className:u.mainContainer_buttonPanelBox,children:[e.jsx("div",{}),e.jsxs("div",{className:u.mainContainer_buttonPanelBox_leftCreateButton,children:[e.jsx(g,{extraClass:u.buttonHelper,onClick:()=>i(!0),children:e.jsx("i",{className:"fas fa-plus"})}),e.jsx(g,{extraClass:u.buttonHelper,onClick:()=>l(!o),children:e.jsx("i",{className:"fas fa-pencil"})})]})]}),e.jsx("div",{className:u.mainContainer_tablePanelBox,children:e.jsx(ce,{currentTableData:j,editMode:!o,onEditClick:L})}),e.jsx(O,{setCurrentTableData:c,users:E,setCurrentPage:y,currentPage:h,pageSize:d,onPageChange:s=>{y(s)},type:"custom"}),e.jsx(U,{setModal:b,modal:k,vacancy:z,onSave:A,systems:B}),e.jsx(xe,{setActive:i,active:m,addVacancy:M,systems:B})]})};export{ke as VacancyPage};
