import{c as $,e as v,A as j,h as C,k as J,j as a,F as M,a3 as P,I as S,B as F,r as h,u as q,o as O,aK as G,aL as U,R as Y,a as T,_ as K,E as Q,G as f,S as L,H as z,g as X,aM as Z,aN as ee}from"./index-DMNo7Djr.js";import"./vacancyPageAddThunk-X10AL61i.js";import{g as ae}from"./selectors-DKdp24P0.js";import{g as se}from"./oftenUsedSelector-DDKSaiMY.js";import{u as k}from"./index.esm-DCZ7tiSb.js";const N=$("employersSlice/fetchEmployersData",async({branch:s})=>{const{request:e}=v();return e(`${j}Users/employeers/?branch=${s}`,"GET",null,C())}),A=$("employersSlice/fetchEmployersDataWithFilter",async({jobId:s,fromAgeId:e,untilageId:t,langId:n})=>{const{request:o}=v();return o(`${j}Users/employeers/?job=${s}&age=${e}-${t}&language=${n}`,"GET",null,C())}),te={employersData:[],deletedEmployers:[],employerDataWithFilter:[],loading:!1,error:null},le=J({name:"employersSlice",initialState:te,reducers:{onDeleteEmployer:(s,e)=>{s.employersData=s.employersData.filter(t=>t.id!==e.payload)}},extraReducers:s=>{s.addCase(N.pending,e=>{e.loading=!0}).addCase(N.fulfilled,(e,t)=>{e.loading=!1,e.employersData=t.payload}).addCase(N.rejected,e=>{e.loading=!1,e.error="error"}).addCase(A.pending,e=>{e.loading=!0}).addCase(A.fulfilled,(e,t)=>{e.loading=!1,e.employerDataWithFilter=t.payload}).addCase(A.rejected,e=>{e.loading=!1,e.error="error"})}}),{onDeleteEmployer:De}=le.actions,oe="_categoryPlus_otsbf_1",re="_categoryModal_otsbf_17",ne="_box_Main_otsbf_21",ce="_box_otsbf_21",D={categoryPlus:oe,categoryModal:re,box_Main:ne,box:ce},ie=({activeCategory:s,setActiveCategory:e})=>a.jsx("div",{className:D.categoryPlus,onClick:()=>e(!s),children:a.jsx("i",{className:"fa fa-plus"})}),de=({register:s,handleSubmit:e,onClick:t,activeCategory:n,setActiveCategory:o})=>a.jsx("div",{children:a.jsx(M,{active:n,setActive:o,children:a.jsxs("div",{className:D.categoryModal,children:[a.jsx("h2",{children:"Ma’lumot qo’shish"}),a.jsxs(P,{typeSubmit:"",onSubmit:e(t),children:[a.jsx(S,{register:s,name:"name",required:!0}),a.jsx(S,{register:s,name:"salary",type:"number",required:!0}),a.jsx("div",{style:{display:"flex",justifyContent:"center"},children:a.jsx(F,{type:"simple",children:"Qo'shish"})})]})]})})}),ge=({register:s,handleSubmit:e,onClick:t,activeCategory:n,setActiveCategory:o,deleteBtn:c})=>a.jsx("div",{children:a.jsx(M,{active:n,setActive:o,children:a.jsxs("div",{className:D.categoryModal,children:[a.jsx("h2",{children:"Ma’lumot qo’shish"}),a.jsxs(P,{typeSubmit:"",children:[a.jsx(S,{register:s,name:"name",required:!0}),a.jsx(S,{register:s,name:"salary",type:"number",required:!0}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsxs(F,{onClick:e(c),type:"danger",children:["O'chirish ",a.jsx("i",{className:"fa fa-trash"})]}),a.jsx(F,{onClick:e(t),type:"simple",children:"Tastiqlash"})]})]})]})})}),ye=({salaryTypes:s,setEdit:e,edit:t})=>{const[n,o]=h.useState(!1),c=q(),{request:y}=v(),{register:x,handleSubmit:u,setValue:i}=k(),m=r=>{const d=t.id,E={id:d,...r};y(`${j}Teachers/salary-types/${d}/`,"PATCH",JSON.stringify(E),C()).then(g=>{c(O({status:!0,type:"success",msg:g.msg})),c(G(g)),o(!n),i("name",""),i("salary","")}).catch(g=>{console.log(g)})},b=()=>{const r=t.id;y(`${j}Teachers/salary-types/${r}/`,"DELETE",null,C()).then(d=>{console.log(d),c(U({id:r})),c(O({status:!0,type:"success",msg:d.msg})),o(!n),i("name",""),i("salary","")}).catch(d=>{console.log(d)})};return a.jsxs("div",{className:D.box_Main,children:[s?.map(r=>a.jsxs("div",{className:D.box,onClick:()=>{e({id:r.id,name:r.name}),o(!n),i("name",r.name),i("salary",r.salary)},children:[a.jsxs("p",{children:["Nomi : ",r.name]}),a.jsxs("span",{children:["Oyligi : ",r.salary]})]})),a.jsx(ge,{deleteBtn:b,onClick:m,activeCategory:n,setActiveCategory:o,register:x,handleSubmit:u})]})},I=$("filterEmployees/fetchFilteredEmployees",async s=>{const{request:e}=v();return await e(`${j}`,"POST",JSON.stringify(s),C())}),ue={employees:null,ageTo:null,ageFrom:null,jobId:null,languageId:null,isDelete:!1,loading:!1,error:null},me=J({name:"filterEmployees",initialState:ue,reducers:{fetchAgeTo:(s,e)=>{s.ageTo=e.payload},fetchAgeFrom:(s,e)=>{s.ageFrom=e.payload},fetchAgeJobId:(s,e)=>{s.jobId=e.payload},fetchLanguageId:(s,e)=>{s.languageId=e.payload},fetchIsDelete:(s,e)=>{s.isDelete=e.payload}},extraReducers:s=>s.addCase(I.pending,e=>{e.loading=!0,e.error=null}).addCase(I.fulfilled,(e,t)=>{e.employees=t.payload,e.loading=!1,e.error=null}).addCase(I.rejected,(e,t)=>{e.loading=!1,e.error=t.payload??null})}),{fetchAgeTo:pe,fetchAgeFrom:he,fetchAgeJobId:fe,fetchLanguageId:xe,fetchIsDelete:ve}=me.actions,Ae=Y.memo(({active:s,setActive:e,activeSwitch:t,setActiveSwitch:n})=>{const o=q(),c=T(se),[y,x]=h.useState(""),[u,i]=h.useState(""),[m,b]=h.useState("all"),[r,d]=h.useState("all"),E=T(ae);function g(l,p,w,W){o(A({jobId:l,langId:p,fromAgeId:w,untilageId:W}))}const _=E?.map(l=>({id:l.group.id,name:l.group.name}))||[],B=l=>{l!==m&&(b(l),o(fe(l)),g(l,r,y,u))},H=l=>{l!==r&&(d(l),o(xe(l)),g(m,l,y,u))},R=l=>{const p=l.target.value;x(p),o(he(p)),g(m,r,p,u)},V=l=>{const p=l.target.value;i(p),o(pe(p)),g(m,r,y,p)};return h.useEffect(()=>{o(K()),o(Q())},[o]),a.jsx(M,{active:s,setActive:e,children:a.jsxs("div",{className:f.filter,children:[a.jsx("h1",{children:"Filter"}),a.jsxs("div",{className:f.filter__container,children:[a.jsx(L,{title:"Ish",options:[{name:"Hamma",id:"all"},..._],extraClass:f.filter__select,onChangeOption:B,defaultValue:m}),a.jsxs("div",{className:f.filter__age,children:[a.jsx(S,{type:"number",extraClassName:f.filter__input,placeholder:"Yosh (От)",value:y,onChange:l=>x(l.target.value),onBlur:R}),a.jsx(S,{type:"number",extraClassName:f.filter__input,placeholder:"Yosh (До)",value:u,onChange:l=>i(l.target.value),onBlur:V})]}),a.jsx(L,{title:"Til",options:[{name:"Hamma",id:"all"},...c],extraClass:f.filter__select,onChangeOption:H,defaultValue:r}),a.jsxs("div",{className:f.filter__switch,children:[a.jsx("p",{children:"O’chirilgan"}),a.jsx(z,{activeSwitch:t,onChangeSwitch:()=>n(l=>!l)})]})]})]})})}),je=s=>s.employerCategorySlice.employerCategoryData,Te=({extraClass:s})=>{const[e,t]=h.useState(!1),{register:n,handleSubmit:o,setValue:c}=k(),y=T(X),x=T(je),u=q(),[i,m]=h.useState({}),{request:b}=v(),r=y.id;h.useEffect(()=>{u(Z(r))},[]);const d=E=>{const g={...E,branch:r};b(`${j}Teachers/salary-types/?branch=${r}`,"POST",JSON.stringify(g),C()).then(_=>{t(!e),u(ee(_)),c("name",""),c("salary","")}).catch(_=>{console.log(_)})};return a.jsxs("div",{className:s,children:[a.jsx(ie,{activeCategory:e,setActiveCategory:t}),a.jsx(ye,{setEdit:m,salaryTypes:x,edit:i}),a.jsx(de,{onClick:d,register:n,handleSubmit:o,activeCategory:e,setActiveCategory:t})]})};export{Te as E,Ae as a,N as f,De as o};
