import{r as c,a as p,u as C,j as e,T as v,D as N,ay as w,e as P,A,h as F,o as T,g as M,z as L,b as $,B as R}from"./index-BM3qoPaZ.js";import{C as z}from"./confirmModal-CQUKf-gX.js";import{o as U,f as q,a as B}from"./employerCategoryPage-DDqEJjbK.js";import{E as fe}from"./employerCategoryPage-DDqEJjbK.js";import{g as I}from"./searchSelector-CJfw-E7m.js";import{P as Y}from"./pagination-CoR0epqf.js";import{M as O}from"./MultiPage-KOZdUKDD.js";import"./vacancyPageAddThunk-FiVlINKL.js";import"./selectors-DKdp24P0.js";import"./oftenUsedSelector-DDKSaiMY.js";import"./index.esm-D0zpTM6p.js";import"./link-NvIVEto_.js";import"./multiPageSlice-CmlrNnKS.js";import"./multiPageSelector-YWRSeSd0.js";const W="_employer_nlpwb_1",H="_employer__header_nlpwb_7",b={employer:W,employer__header:H},V="_employer_1iw62_1",G="_thead_1iw62_7",J="_checkbox__minus_1iw62_11",K="_checkbox__checked_1iw62_26",x={employer:V,thead:G,checkbox__minus:J,checkbox__checked:K,delete:"_delete_1iw62_38"},Q=s=>s.employers.employersData,X=s=>s.employers.deletedEmployers,Z=s=>s.employers.loading,ee=s=>s.employers.employerDataWithFilter,se=({currentTableData:s,loading:y})=>{const[o,u]=c.useState([]),i=p(Z),l=p(ee),[r,a]=c.useState(!1),[n,_]=c.useState(),d=()=>i?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",children:"Yuklanmoqda..."})}):(l&&l.length>0?l:s)?.map((t,D)=>{if(typeof t=="object"&&!Array.isArray(t))return e.jsxs("tr",{children:[e.jsx("td",{children:D+1}),e.jsx(w,{to:`employerProfile/${t?.id}`,children:e.jsxs("td",{children:[t?.name," ",t?.surname]})}),e.jsx("td",{children:t?.phone}),e.jsx("td",{children:t?.age}),e.jsx("td",{children:t?.job}),e.jsx("td",{children:t.status?e.jsx("div",{onClick:()=>u(k=>o.includes(t?.id)?[...k.filter(S=>S!==t?.id)]:[...k,t?.id]),className:o.includes(t?.id)?x.checkbox__checked:x.checkbox__minus,children:o.includes(t?.id)?e.jsx("i",{className:"fa fa-check"}):e.jsx("i",{className:"fa fa-minus"})}):null}),e.jsx("td",{children:e.jsx("div",{onClick:()=>{_(t),a(!0)},className:x.delete,children:e.jsx("i",{className:"fa fa-trash"})})})]})}),{request:g}=P(),j=C(),f=()=>{g(`${A}Users/employers/delete/${n.id}`,"DELETE",null,F()).then(m=>{j(T({type:"success",status:!0,msg:m.msg})),j(U(n.id)),a(!1)})};console.log(n);const h=d();return e.jsx("div",{className:x.employer,children:e.jsxs("div",{className:x.table,children:[e.jsxs(v,{children:[e.jsx("thead",{className:x.thead,children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Full name"}),e.jsx("th",{children:"Tel"}),e.jsx("th",{children:"Yosh"}),e.jsx("th",{children:"Ish"}),e.jsx("th",{children:"Status"}),e.jsx("th",{})]})}),i?e.jsx(N,{}):e.jsx("tbody",{children:h})]}),e.jsx(z,{type:"danger",title:"O'chirmoq",text:`${n?.name} o'chirishni hohlaysizmi`,active:r,setActive:a,onClick:f})]})})},E={},te=()=>{const s=p(X),[y,o]=c.useState([]),[u,i]=c.useState([]),l=()=>s?.map((r,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:a+1}),e.jsxs("td",{children:[r.name," ",r.surname]}),e.jsx("td",{children:r.phone}),e.jsx("td",{children:r.age}),e.jsx("td",{children:r.work}),e.jsx("td",{children:r.deleteData})]}));return e.jsx("div",{className:E.employer,children:e.jsx("div",{className:E.table,children:e.jsxs(v,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Full name"}),e.jsx("th",{children:"Tel"}),e.jsx("th",{children:"Yosh"}),e.jsx("th",{children:"Fan"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:l()})]})})})},je=()=>{const s=p(M),y=C(),o=p(Q),[u,i]=c.useState(!1),l=c.useMemo(()=>30,[]),[r,a]=c.useState(1),[n,_]=c.useState(!1),d=p(I),{"*":g}=L();$(),c.useEffect(()=>{s?.id&&y(q({branch:s?.id}))},[s?.id]);const j=c.useMemo(()=>{const h=o?.filter(m=>!m.deleted)||[];return a(1),d?h.filter(m=>m.user?.name?.toLowerCase().includes(d.toLowerCase())):h},[o,d]),f=[{name:"Ishchilar",type:"worker"}];return e.jsx(O,{types:f,page:"worker",children:e.jsxs("div",{className:b.employer,children:[e.jsx("div",{className:b.employer__header,children:e.jsx(R,{onClick:()=>i(!u),status:"filter",type:"filter",children:"Filter"})}),n?e.jsx(te,{}):e.jsxs(e.Fragment,{children:[e.jsx(se,{currentTableData:j.slice((r-1)*l,r*l)}),e.jsx(Y,{setCurrentTableData:()=>{},search:d,users:j,setCurrentPage:a,currentPage:r,pageSize:l,onPageChange:h=>{a(h)}})]}),e.jsx(B,{activeSwitch:n,setActiveSwitch:_,active:u,setActive:i})]})})};export{fe as EmployerCategoryPage,je as EmployerPage};
