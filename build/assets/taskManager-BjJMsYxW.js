import{r as f,R as O,j as l,d as pe,u as me,a as xe,g as he,ab as ve,az as _e,aA as be}from"./index-CUkZIMn8.js";import{h as ye,T as Ie}from"./taskManagerRight-CloJUTlb.js";import{K as M,b as Re,c as De,d as q,a as Ne,u as Se,e as Ce,C as H,i as je,g as ze}from"./core.esm-D6G3a735.js";import"./textArea-CJz_gb7R.js";import"./index.esm-BRxczUgP.js";import"./confirmModal-2O0sEs7y.js";import"./clsx-B-dksMZM.js";const Te="_container_abpzi_2",we="_box_abpzi_7",Oe="_box__header_abpzi_16",Me="_box__header_title_abpzi_20",ke="_box__sides_abpzi_28",w={container:Te,box:we,box__header:Oe,box__header_title:Me,box__sides:ke};function V(e,r,t){const s=e.slice();return s.splice(t<0?s.length+t:t,0,s.splice(r,1)[0]),s}function Ee(e,r){return e.reduce((t,s,n)=>{const i=r.get(s);return i&&(t[n]=i),t},Array(e.length))}function k(e){return e!==null&&e>=0}function $e(e,r){if(e===r)return!0;if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function Ae(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const J=e=>{let{rects:r,activeIndex:t,overIndex:s,index:n}=e;const i=V(r,s,t),a=r[n],c=i[n];return!c||!a?null:{x:c.left-a.left,y:c.top-a.top,scaleX:c.width/a.width,scaleY:c.height/a.height}},E={scaleX:1,scaleY:1},Le=e=>{var r;let{activeIndex:t,activeNodeRect:s,index:n,rects:i,overIndex:a}=e;const c=(r=i[t])!=null?r:s;if(!c)return null;if(n===t){const d=i[a];return d?{x:0,y:t<a?d.top+d.height-(c.top+c.height):d.top-c.top,...E}:null}const u=Pe(i,n,t);return n>t&&n<=a?{x:0,y:-c.height-u,...E}:n<t&&n>=a?{x:0,y:c.height+u,...E}:{x:0,y:0,...E}};function Pe(e,r,t){const s=e[r],n=e[r-1],i=e[r+1];return s?t<r?n?s.top-(n.top+n.height):i?i.top-(s.top+s.height):0:i?i.top-(s.top+s.height):n?s.top-(n.top+n.height):0:0}const Q="Sortable",W=O.createContext({activeIndex:-1,containerId:Q,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:J,disabled:{draggable:!1,droppable:!1}});function Xe(e){let{children:r,id:t,items:s,strategy:n=J,disabled:i=!1}=e;const{active:a,dragOverlay:c,droppableRects:u,over:d,measureDroppableContainers:o}=Re(),x=De(Q,t),v=c.rect!==null,m=f.useMemo(()=>s.map(N=>typeof N=="object"&&"id"in N?N.id:N),[s]),R=a!=null,p=a?m.indexOf(a.id):-1,_=d?m.indexOf(d.id):-1,y=f.useRef(m),D=!$e(m,y.current),I=_!==-1&&p===-1||D,h=Ae(i);q(()=>{D&&R&&o(m)},[D,m,R,o]),f.useEffect(()=>{y.current=m},[m]);const j=f.useMemo(()=>({activeIndex:p,containerId:x,disabled:h,disableTransforms:I,items:m,overIndex:_,useDragOverlay:v,sortedRects:Ee(m,u),strategy:n}),[p,x,h.draggable,h.droppable,I,m,_,u,v,n]);return O.createElement(W.Provider,{value:j},r)}const Be=e=>{let{id:r,items:t,activeIndex:s,overIndex:n}=e;return V(t,s,n).indexOf(r)},Ye=e=>{let{containerId:r,isSorting:t,wasDragging:s,index:n,items:i,newIndex:a,previousItems:c,previousContainerId:u,transition:d}=e;return!d||!s||c!==i&&n===a?!1:t?!0:a!==n&&r===u},Fe={duration:200,easing:"ease"},Z="transform",Ge=H.Transition.toString({property:Z,duration:0,easing:"linear"}),Ke={roleDescription:"sortable"};function Ue(e){let{disabled:r,index:t,node:s,rect:n}=e;const[i,a]=f.useState(null),c=f.useRef(t);return q(()=>{if(!r&&t!==c.current&&s.current){const u=n.current;if(u){const d=ze(s.current,{ignoreTransform:!0}),o={x:u.left-d.left,y:u.top-d.top,scaleX:u.width/d.width,scaleY:u.height/d.height};(o.x||o.y)&&a(o)}}t!==c.current&&(c.current=t)},[r,t,s,n]),f.useEffect(()=>{i&&a(null)},[i]),i}function ee(e){let{animateLayoutChanges:r=Ye,attributes:t,disabled:s,data:n,getNewIndex:i=Be,id:a,strategy:c,resizeObserverConfig:u,transition:d=Fe}=e;const{items:o,containerId:x,activeIndex:v,disabled:m,disableTransforms:R,sortedRects:p,overIndex:_,useDragOverlay:y,strategy:D}=f.useContext(W),I=qe(s,m),h=o.indexOf(a),j=f.useMemo(()=>({sortable:{containerId:x,index:h,items:o},...n}),[x,n,h,o]),N=f.useMemo(()=>o.slice(o.indexOf(a)),[o,a]),{rect:P,node:X,isOver:te,setNodeRef:B}=Ne({id:a,data:j,disabled:I.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...u}}),{active:z,activatorEvent:re,activeNodeRect:ne,attributes:se,setNodeRef:Y,listeners:ae,isDragging:$,over:ie,setActivatorNodeRef:oe,transform:ce}=Se({id:a,data:j,attributes:{...Ke,...t},disabled:I.draggable}),de=Ce(B,Y),S=!!z,F=S&&!R&&k(v)&&k(_),G=!y&&$,K=G&&F?ce:null,le=F?K??(c??D)({rects:p,activeNodeRect:ne,activeIndex:v,overIndex:_,index:h}):null,T=k(v)&&k(_)?i({id:a,items:o,activeIndex:v,overIndex:_}):h,C=z?.id,g=f.useRef({activeId:C,items:o,newIndex:T,containerId:x}),ue=o!==g.current.items,U=r({active:z,containerId:x,isDragging:$,isSorting:S,id:a,index:h,items:o,newIndex:g.current.newIndex,previousItems:g.current.items,previousContainerId:g.current.containerId,transition:d,wasDragging:g.current.activeId!=null}),A=Ue({disabled:!U,index:h,node:X,rect:P});return f.useEffect(()=>{S&&g.current.newIndex!==T&&(g.current.newIndex=T),x!==g.current.containerId&&(g.current.containerId=x),o!==g.current.items&&(g.current.items=o)},[S,T,x,o]),f.useEffect(()=>{if(C===g.current.activeId)return;if(C&&!g.current.activeId){g.current.activeId=C;return}const ge=setTimeout(()=>{g.current.activeId=C},50);return()=>clearTimeout(ge)},[C]),{active:z,activeIndex:v,attributes:se,data:j,rect:P,index:h,newIndex:T,items:o,isOver:te,isSorting:S,isDragging:$,listeners:ae,node:X,overIndex:_,over:ie,setNodeRef:de,setActivatorNodeRef:oe,setDroppableNodeRef:B,setDraggableNodeRef:Y,transform:A??le,transition:fe()};function fe(){if(A||ue&&g.current.newIndex===h)return Ge;if(!(G&&!je(re)||!d)&&(S||U))return H.Transition.toString({...d,property:Z})}}function qe(e,r){var t,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(t=e?.draggable)!=null?t:r.draggable,droppable:(s=e?.droppable)!=null?s:r.droppable}}M.Down,M.Right,M.Up,M.Left;const He="_funnel_zuotn_1",Ve="_funnel__wrapper_zuotn_16",L={funnel:He,funnel__wrapper:Ve},Je=f.forwardRef((e,r)=>{const{attributes:t,listeners:s,items:n,activeDown:i,onToggleChapter:a,style:c,dragOverlay:u,container:d,children:o}=e,x=f.useMemo(()=>n.map(v=>v.id),[n]);return l.jsxs("div",{style:c,...t,className:L.funnel,ref:r,children:[l.jsx("div",{className:L.funnel__header,children:l.jsx("h1",{children:d.title})}),l.jsx("div",{className:L.funnel__wrapper,children:l.jsx(Xe,{strategy:Le,items:x,children:o})})]})}),Qe="_leadCard_10zyz_1",We="_dragging_10zyz_13",Ze="_dragOverlay_10zyz_13",et="_header_10zyz_26",tt="_info_10zyz_35",rt="_date_10zyz_41",nt="_footer_10zyz_44",st="_task_10zyz_47",b={leadCard:Qe,dragging:We,dragOverlay:Ze,header:et,info:tt,date:rt,footer:nt,task:st},at=O.memo(O.forwardRef(({color:e,dragOverlay:r,dragging:t,disabled:s,fadeIn:n,handle:i,handleProps:a,height:c,index:u,listeners:d,attributes:o,onRemove:x,renderItem:v,sorting:m,transition:R,transform:p,value:_,wrapperStyle:y,...D},I)=>(CSS.Transform?.toString(p),l.jsxs("div",{className:pe(b.leadCard,{[b.dragging]:t,[b.dragOverlay]:r}),ref:I,style:{...y,transition:[R,y?.transition].filter(Boolean).join(", "),"--translate-x":p?`${Math.round(p.x)}px`:void 0,"--translate-y":p?`${Math.round(p.y)}px`:void 0,"--scale-x":p?.scaleX?`${p.scaleX}`:void 0,"--scale-y":p?.scaleY?`${p.scaleY}`:void 0,"--index":u,"--color":e},...d,...o,children:[l.jsxs("div",{className:b.header,children:[l.jsxs("div",{className:b.info,children:[l.jsxs("div",{className:b.name,children:["Ulug'bek ",_]}),l.jsx("div",{className:b.surname,children:"Fatxullayev"})]}),l.jsx("div",{className:b.date,children:l.jsx("div",{className:b.date__title,children:"22-iyul 16:30"})})]}),l.jsx("div",{className:b.footer,children:l.jsx("div",{className:b.task,children:"Task: yes"})})]}))));O.memo(e=>{const{item:r}=e,{active:t,attributes:s,isDragging:n,listeners:i,over:a,setNodeRef:c,transition:u,transform:d}=ee({id:r.id,data:{type:"container",children:r.items}});return a&&(r.id===a.id&&t?.data.current?.type!=="container"||r.items.some(o=>o.id===a.id)),l.jsx(Je,{style:{transition:u,transform:CSS?.Translate?.toString(d),opacity:n?.5:void 0},attributes:s,listeners:i,ref:c,items:r?.items,container:r,children:r.items.map(o=>l.jsx(it,{item:o},o.id))})});function it({item:e}){const{isDragging:r,attributes:t,listeners:s,setNodeRef:n,transform:i,transition:a}=ee({id:e.id,transition:{duration:150,easing:"cubic-bezier(0.25, 1, 0.5, 1)"}});return l.jsx(at,{attributes:t,listeners:s,ref:n,transform:i,transition:a,id:e.id,item:e,dragging:r})}const mt=()=>{const e=me(),{id:r}=xe(he),[t,s]=f.useState(new Date),[n,i]=f.useState("progress"),a=ve(t);return f.useEffect(()=>{e(_e({date:a,taskType:n,branch:r})),e(be())},[a,n]),l.jsx("div",{className:w.container,children:l.jsxs("div",{className:w.box,children:[l.jsx("div",{className:w.box__header,children:l.jsx("h1",{className:w.box__header_title,children:"My Projects"})}),l.jsxs("div",{className:w.box__sides,children:[l.jsx(ye,{setTaskType:i,taskType:n,formatted:a}),l.jsx(Ie,{selectedDate:t,setSelectedDate:s})]})]})})};export{mt as TaskManager};
