import{c as T,e as g,A as h,h as p,R as $,r as l,u as V,a as v,j as s,F as W,a3 as F,I as G,S as I,B as A,_ as E,o as D}from"./index-CTtC1zcc.js";import{E as C}from"./editableCard-DRKBnIvM.js";import{A as P}from"./workerSelect-CXz8TkGO.js";import{u as J}from"./index.esm-X1Z8qUg7.js";import"./vacancyPageAddThunk-Dm00H5E_.js";const ne=T("vacancyWorkerSlice/vacancyWorkerListThunk",async(a,{rejectWithValue:r})=>{const{request:t}=g();try{return await t(`${h}Users/users-job/`,"POST",JSON.stringify(a),p())}catch(o){return r(o.response.data)}}),U="_filter_1syjy_1",z="_cardSelect_1syjy_71",f={filter:U,cardSelect:z},oe=$.memo(({active:a,setActive:r,user_id:t})=>{const{register:o,handleSubmit:j,setValue:S}=J(),[u,y]=l.useState([]),[d,_]=l.useState([]),[i,x]=l.useState([]),m=V(),c=v(K),b=v(e=>e.userSetPermissionSlice.locations),k=v(e=>e.userSetPermissionSlice.branches);l.useEffect(()=>{m(H())},[m]);const L=c?.systems?.map(e=>({value:e.id,label:e.name})),w=async()=>{const e={user:t,systems:u.map(n=>n.value),locations:d.map(n=>n.value),branchs:i.map(n=>n.value)};try{await m(M(e))}catch(n){console.error("An error occurred:",n)}r(!a)},q=e=>{y(e),e.map(n=>n.value)},B=e=>{_(e)},N=(Array.isArray(b)?b:[b])?.map(e=>({value:e.id,label:e.name})),R=(Array.isArray(k)?k:[k])?.map(e=>({value:e?.id,label:e?.name}));return s.jsx(W,{active:a,setActive:r,children:s.jsxs(F,{onSubmit:j(w),extraClassname:f.filter,children:[s.jsx(C,{extraClass:f.cardSelect,children:s.jsx(P,{options:L,value:u,onChange:q})}),s.jsx(C,{extraClass:f.cardSelect,children:s.jsx(P,{options:N,value:d,onChange:B})}),s.jsx(C,{extraClass:f.cardSelect,children:s.jsx(P,{options:R,value:i,onChange:x})})]})})}),M=T("userSetPermissionSlice/userSetPermissionThunk",async(a,{rejectWithValue:r})=>{const{request:t}=g();try{return await t(`${h}Permissions/add_permissions_managers_and_directors/`,"POST",JSON.stringify(a),p())}catch(o){return r(o.message)}}),H=T("vacancyWorkerSoucre/vacancyWorkerGetThunk",async()=>{const{request:a}=g();return await a(`${h}Permissions/add_permissions_managers_and_directors/`,"GET",null,p())}),K=a=>a.vacancyWorkerSoucre?.workerData,Q="_filter_dmj1h_1",X="_filter__container_dmj1h_6",O={filter:Q,filter__container:X},ce=$.memo(({modal:a,setModal:r,vacancy:t,onSave:o,systems:j})=>{const[S,u]=l.useState(t?.group?.name||""),[y,d]=l.useState(t?.system_id?.id||"");l.useEffect(()=>{t&&(u(t.group.name),d(t.system_id.id))},[t]);const{request:_}=g(),i=V(),x=()=>{const c={...t,name:S,system_id:y};o(c),_(`${h}Permissions/jobss/${t.group.id}/`,"PUT",JSON.stringify(c),p()).then(()=>{i(E()),i(D({status:!0,msg:`${S} muvaffaqiyatli o'zgartirildi`,type:"success"})),r(!1)})},m=()=>{_(`${h}Permissions/jobs_delete/${t.id}/`,"DELETE",null,p()).then(c=>{i(E()),i(D({status:!0,msg:c.msg,type:"success"}))})};return s.jsx(W,{active:a,setActive:r,children:s.jsxs("div",{className:O.filter,children:[s.jsx("h1",{children:"Ma'lumotlarni o'zgartirish"}),s.jsxs("div",{className:O.filter__container,children:[s.jsx(G,{placeholder:"Kasb nomi",value:S,onChange:c=>u(c.target.value)}),s.jsx(I,{options:j,onChangeOption:d,defaultValue:y}),s.jsxs("div",{style:{display:"flex"},children:[s.jsx(A,{onClick:x,children:"Change"}),t?.status&&s.jsx(A,{type:"danger",onClick:m,children:"Delete"})]})]})]})})});export{ce as V,oe as a,ne as v};
