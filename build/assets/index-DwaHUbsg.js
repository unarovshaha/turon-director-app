import{R as N,b as L,aP as $,r as h,b9 as A,a as p,q as T,g as w,u as j,j as o,N as O,a4 as q,M,ba as R,bb as S,d as y,s as D,bc as U,bd as B,aX as P,be as J,bf as V,bg as F,bh as W,bi as X,aw as z}from"./index-CUkZIMn8.js";import{L as G}from"./link-BlQJGlsH.js";import{c as H,g as K,b as Q}from"./userProfileSelector-DVds6RNm.js";import{_ as Y,a as Z,b as ss}from"./TransitionGroupContext-DM1NTbMR.js";import{f as es,T as ts}from"./Transition-CrwhrZan.js";function ns(e,n){return e.classList?!!n&&e.classList.contains(n):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+n+" ")!==-1}function as(e,n){e.classList?e.classList.add(n):ns(e,n)||(typeof e.className=="string"?e.className=e.className+" "+n:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+n))}function k(e,n){return e.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function rs(e,n){e.classList?e.classList.remove(n):typeof e.className=="string"?e.className=k(e.className,n):e.setAttribute("class",k(e.className&&e.className.baseVal||"",n))}var os=function(n,c){return n&&c&&c.split(" ").forEach(function(s){return as(n,s)})},C=function(n,c){return n&&c&&c.split(" ").forEach(function(s){return rs(n,s)})},b=function(e){Y(n,e);function n(){for(var s,i=arguments.length,d=new Array(i),l=0;l<i;l++)d[l]=arguments[l];return s=e.call.apply(e,[this].concat(d))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(t,a){var r=s.resolveArguments(t,a),f=r[0],_=r[1];s.removeClasses(f,"exit"),s.addClass(f,_?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(t,a)},s.onEntering=function(t,a){var r=s.resolveArguments(t,a),f=r[0],_=r[1],u=_?"appear":"enter";s.addClass(f,u,"active"),s.props.onEntering&&s.props.onEntering(t,a)},s.onEntered=function(t,a){var r=s.resolveArguments(t,a),f=r[0],_=r[1],u=_?"appear":"enter";s.removeClasses(f,u),s.addClass(f,u,"done"),s.props.onEntered&&s.props.onEntered(t,a)},s.onExit=function(t){var a=s.resolveArguments(t),r=a[0];s.removeClasses(r,"appear"),s.removeClasses(r,"enter"),s.addClass(r,"exit","base"),s.props.onExit&&s.props.onExit(t)},s.onExiting=function(t){var a=s.resolveArguments(t),r=a[0];s.addClass(r,"exit","active"),s.props.onExiting&&s.props.onExiting(t)},s.onExited=function(t){var a=s.resolveArguments(t),r=a[0];s.removeClasses(r,"exit"),s.addClass(r,"exit","done"),s.props.onExited&&s.props.onExited(t)},s.resolveArguments=function(t,a){return s.props.nodeRef?[s.props.nodeRef.current,t]:[t,a]},s.getClassNames=function(t){var a=s.props.classNames,r=typeof a=="string",f=r&&a?a+"-":"",_=r?""+f+t:a[t],u=r?_+"-active":a[t+"Active"],v=r?_+"-done":a[t+"Done"];return{baseClassName:_,activeClassName:u,doneClassName:v}},s}var c=n.prototype;return c.addClass=function(i,d,l){var t=this.getClassNames(d)[l+"ClassName"],a=this.getClassNames("enter"),r=a.doneClassName;d==="appear"&&l==="done"&&r&&(t+=" "+r),l==="active"&&i&&es(i),t&&(this.appliedClasses[d][l]=t,os(i,t))},c.removeClasses=function(i,d){var l=this.appliedClasses[d],t=l.base,a=l.active,r=l.done;this.appliedClasses[d]={},t&&C(i,t),a&&C(i,a),r&&C(i,r)},c.render=function(){var i=this.props;i.classNames;var d=Z(i,["classNames"]);return N.createElement(ts,ss({},d,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(N.Component);b.defaultProps={classNames:""};b.propTypes={};const g={director:"director",admin:"admin"},is=[{to:"dashboard",name:"Dashboard",icon:"fas fa-dashboard",system:["school"],roles:[g.director,g.admin]},{to:"accounting",name:"Buxgalteriya ",icon:"fa-calculator",system:["center","school"],roles:[g.director],branches:!0,multi:!0},{to:"adminTaskManager",name:"Task Manager",icon:"fa-tasks",system:["center","school"],roles:[g.director,g.admin]}],cs="_menu_f57n8_1",ls="_menu__user_f57n8_12",us="_userImage_f57n8_22",ds="_userInfo_f57n8_27",ms="_menu__inner_f57n8_33",_s="_link_f57n8_57",fs="_active_f57n8_63",ps="_link__href_f57n8_71",hs="_link__title_f57n8_82",gs="_menu__footer_f57n8_86",vs="_menu__exit_f57n8_103",m={menu:cs,menu__user:ls,userImage:us,userInfo:ds,menu__inner:ms,link:_s,active:fs,link__href:ps,link__title:hs,menu__footer:gs,menu__exit:vs},xs=()=>{const e=L(),{pathname:n}=$(),{theme:c}=h.useContext(A);p(T),p(H);const s=p(K);p(Q);const i=localStorage.getItem("user_id"),d=JSON.parse(localStorage.getItem("selectedSystem")),l=JSON.parse(localStorage.getItem("selectedLocations")),t=p(w),a=j(),r=()=>{e("/login"),a(R())},_=h.useCallback(()=>is.map((u,v)=>{if(l?.length>1&&!u.multi||l?.length>1&&u.multi||`${t?.id}`,!(l>1&&!u.branches)&&u?.system.includes(d?.name)&&(typeof u.roles=="object"&&s?.job.some(x=>u.roles.includes(x))||typeof u.roles=="boolean"&&u.roles))return o.jsx(O,{to:u.to,className:({isActive:x})=>x?`${m.link} ${m.active}`:`${m.link}`,children:o.jsxs("span",{className:m.link__href,children:[o.jsx("i",{className:`fas ${u.icon} icon-link`}),o.jsx("span",{className:m.link__title,children:u.name})]})},v)}),[c,l,t,s])();return o.jsxs("nav",{className:m.menu,children:[o.jsxs("div",{className:m.menu__user,children:[o.jsx(G,{to:`profile/${i}`,children:o.jsx("img",{className:m.userImage,src:s?.profile_img??q,alt:""})}),o.jsxs("div",{className:m.userInfo,children:[o.jsx("h3",{children:s?.username}),o.jsx("p",{children:s?.job[0]})]})]}),o.jsx("ul",{className:m.menu__inner,children:s?.job?_:o.jsx(M,{})}),o.jsx("div",{className:m.menu__footer,children:o.jsxs("div",{className:m.menu__exit,onClick:r,children:[o.jsx("i",{className:"fas fa-sign-out-alt"}),o.jsx("h2",{children:"Chiqish"})]})})]})},Cs="_main_13nn4_1",Ns="_main__content_13nn4_7",I={main:Cs,main__content:Ns},Es="_alerts_1qlt2_1",js="_alert_1qlt2_1",bs="_success_1qlt2_29",Ss="_warning_1qlt2_33",ks="_show_1qlt2_37",Is="_slideIn_1qlt2_1",Ls="_hide_1qlt2_42",$s="_slideOut_1qlt2_1",E={alerts:Es,alert:js,success:bs,warning:Ss,show:ks,slideIn:Is,hide:Ls,slideOut:$s},As=e=>e.alertSlice?.alert,Ts=()=>{const e=p(As);return o.jsx("div",{className:E.alerts,children:e?.map((n,c)=>o.jsx(ws,{alert:n,index:c}))})},ws=N.memo(({alert:e,index:n})=>{const c=h.useRef(null),s=j(),i=d=>{s(S({index:d}))};return h.useEffect(()=>{const d=setTimeout(()=>{s(S({index:n}))},(n+1)*3e3);return()=>clearTimeout(d)},[e]),o.jsx(b,{in:e.status,nodeRef:c,timeout:400,classNames:"alert",unmountOnExit:!0,children:o.jsxs("div",{ref:c,className:y(E.alert,E[e.type]),children:[o.jsx("p",{children:e.msg}),o.jsx("i",{className:"fa-solid fa-xmark",onClick:()=>i(n)})]},n)})}),Ds=()=>{const e=localStorage.getItem("user_id");p(D);const n=p(U),c=JSON.parse(localStorage.getItem("selectedLocations"));p(B),p(P);const s=JSON.parse(localStorage.getItem("selectedSystem")),i=j();return h.useEffect(()=>{e&&i(J(e))},[e]),h.useEffect(()=>{n||i(V())},[n]),h.useEffect(()=>{s.id&&i(F(s.id))},[s?.id]),h.useEffect(()=>{c[0]?.id?i(W(c[0].id)):i(X())},[c?.[0].id]),o.jsxs(o.Fragment,{children:[o.jsx(Ts,{}),o.jsx(xs,{}),o.jsx("main",{className:I.main,children:o.jsx("div",{className:I.main__content,children:o.jsx(z,{})})})]})};export{Ds as Layout};
