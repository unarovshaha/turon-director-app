import{r as o,b as Q,u as A,j as e,T as H,e as $,A as P,h as O,o as I,aF as W,L as X,a as l,F as M,a3 as E,I as T,S as w,f as Y,aG as Z,aH as ee,B,M as K,a4 as te,d as z,a9 as se,aI as ae,aJ as ne}from"./index-CUkZIMn8.js";import{u as V}from"./index.esm-BRxczUgP.js";import{b as J,a as re}from"./userProfileSelector-DVds6RNm.js";import{a as oe,b as de,g as ce,c as le}from"./groupProfileRating-BtjtsVUD.js";import{C as ie}from"./confirmModal-2O0sEs7y.js";import"./pagination-BBALUyum.js";import{g as ue}from"./groupsList-i-W7R_of.js";import"./workerSelect-CgSdLQmn.js";import"./teachers-CvOv733M.js";import{g as me}from"./roomsSelectors-Dutms6Wd.js";import"./textArea-CJz_gb7R.js";import"./editableCard-oMSJDufg.js";import{g as he}from"./oftenUsedSelector-DDKSaiMY.js";const Xe=t=>t.newStudents.filteredByClass,Ye=t=>t.newStudents.filteredByClassStudents,Ze=t=>t.newStudents?.newStudentsStatus,et=t=>t.newStudents?.studyingStudentsStatus,tt=t=>t.newStudents?.loading,st=t=>t.newStudents?.newStudentes,at=t=>t.newStudents.studyingStudents,nt=t=>t.newStudents?.filteredStudents,rt=t=>t.newStudents?.filteredTeachers,ot=t=>t.newStudents?.filteredErrors,_e=t=>t.newStudents?.newStudentsStatus,xe=t=>t.newStudents?.filteredCurseTypes,pe=t=>t.newStudents?.filteredCurseLevel,dt=t=>t.newStudents?.deletedStudents,ge="_mainContainer_tablePanelBox_yq31o_7",je="_xmark_yq31o_34",D={mainContainer_tablePanelBox:ge,xmark:je},ct=o.memo(({currentTableData:t,setSelectStudents:f,theme:F,branchId:y})=>{const[i,C]=o.useState(!1),[m,u]=o.useState(!1),[x,p]=o.useState(!1),r=Q(),c=JSON.parse(localStorage.getItem("selectedSystem")),g=t?.map((s,h)=>e.jsxs("tr",{children:[e.jsx("td",{children:h+1}),e.jsx("td",{onClick:()=>r(`profile/${s.id}`),children:`${s.user?.surname} ${s.user?.name}`}),e.jsx("td",{children:s.user?.age}),e.jsx("td",{children:s.deleted?s.user?.language.name:s.user?.language}),e.jsxs("td",{children:[s?.class_number,"-sinf"]}),e.jsx("td",{children:s.user?.registered_date}),e.jsx("td",{onClick:()=>{C(s.id),p(!x),u(s?.deleted)},children:e.jsx("i",{style:{color:"#FF3737FF"},className:`fa-solid fa-xmark ${D.xmark}`})})]},s.id)),G=A(),{request:N}=$(),d=()=>{N(`${P}Students/students_delete/${i}/`,"DELETE",null,O()).then(s=>{G(I({type:"success",status:!0,msg:s.msg}))}),p(!1),G(W(i))};return e.jsxs("div",{className:D.mainContainer,children:[e.jsx("div",{className:D.mainContainer_tablePanelBox,children:e.jsxs(H,{children:[e.jsx("thead",{className:D.thead,children:e.jsxs("tr",{children:[e.jsx("th",{children:"â„–"}),e.jsx("th",{children:"Full name"}),e.jsx("th",{children:"Age"}),e.jsx("th",{children:"Til"}),c?.name==="school"?e.jsx("th",{children:"Sinf"}):e.jsxs(e.Fragment,{children:[e.jsx("th",{children:"Telefon numer"}),e.jsx("th",{children:"Fani"})]}),e.jsx("th",{children:"Reg. sana"}),e.jsx("th",{children:"O'chirish"})]})}),e.jsx("tbody",{children:g})]})}),e.jsx(ie,{type:m?"success":"danger",title:m?"Qaytarmoq":"O'chirmoq",text:m?"Studentni qaytarishni hohlaysizmi":"Studentni o'chirishni hohlaysizmi",active:x,setActive:p,onClick:d})]})}),Se="_createGroup_11qn0_1",be="_createGroupTitle_11qn0_6",fe="_createGroupFormItem_11qn0_16",Te="_createGroupForm_11qn0_12",j={createGroup:Se,createGroupTitle:be,createGroupFormItem:fe,createGroupForm:Te},lt=o.memo(t=>{const{setActive:f,active:F,selectedStudents:y,selectedTeachers:i,selectedSubjectId:C,selectedTime:m}=t,{register:u,handleSubmit:x}=V();localStorage.getItem("selectedBranch"),X(),A();const p=l(xe),r=l(pe),c=l(he),[v,g]=o.useState(!1);return e.jsx(M,{setActive:f,active:F,children:e.jsxs("div",{className:j.createGroup,children:[e.jsx("div",{className:j.createGroupTitle,children:e.jsx("h2",{children:"Gruppa ochish"})}),e.jsx("div",{className:j.createGroupForm,children:e.jsxs(E,{children:[e.jsx(T,{extraClassName:j.createGroupFormItem,placeholder:"Gruppa nomi",register:u,name:"name"}),e.jsx(w,{extraClassName:j.createGroupFormItem,title:"Kurs turi",options:p,register:u,name:"course_types"}),r?.length?e.jsx(w,{extraClassName:j.createGroupFormItem,title:"Kurs darajasi",options:r,register:u,name:"level"}):null,e.jsx(w,{extraClassName:j.createGroupFormItem,title:"Kurs tili",options:c,register:u,name:"language"}),e.jsx(T,{extraClassName:j.createGroupFormItem,placeholder:"Gruppa narxi",register:u,name:"price",type:"number"}),e.jsx(T,{extraClassName:j.createGroupFormItem,placeholder:"O'qituvchi ulushi",register:u,name:"teacher_salary",type:"number"})]})})]})})}),Fe="_addModal_xl27x_1",ye="_addModal__container_xl27x_19",Ce="_addModal__subject_xl27x_39",ve="_check_xl27x_47",Ge="_check__input_xl27x_52",Ne="_status_xl27x_55",ke="_active_xl27x_64",we="_status__inner_xl27x_67",Ie="_addModal__btn_xl27x_77",_={addModal:Fe,addModal__container:ye,addModal__subject:Ce,check:ve,check__input:Ge,status:Ne,active:ke,status__inner:we,addModal__btn:Ie},it=o.memo(t=>{const{setActive:f,active:F}=t,{request:y}=$(),i=A(),{register:C,handleSubmit:m}=V(),u=l(ue),x=l(oe),p=l(de),r=l(ce),c=l(J),v=l(re),g=l(le),[G,N]=o.useState(!1),[d,s]=o.useState([]),[h,S]=o.useState(""),b=a=>{i(se({id:a?.group})),N(!0)},q=()=>{const a={students:d,update_method:"add_students",group_type:"center"};y(`${P}Group/groups/profile/${r?.id}/`,"PATCH",JSON.stringify(a),O()).then(n=>{i(I({type:"success",status:!0,msg:"O'quvchilar guruhga qo'shildi"}))}).catch(n=>{i(I({type:"error",status:!0,msg:"xatolik yuz berdi (outside groupAdd)"}))})};o.useEffect(()=>{c&&i(Y({userBranchId:c}))},[c]),o.useEffect(()=>{r&&i(Z({group_id:r?.id}))},[r]),o.useEffect(()=>{if(c&&r&&g&&v===1){const a={time_tables:g.map(n=>({week:n.week.id,room:n.room.id,end_time:n.end_time,start_time:n.start_time})),ignore_students:r?.students.map(n=>n.id),ignore_teacher:r?.teacher.map(n=>n.id)[0]};i(ee({branch_id:c,subject_id:r?.subject?.id,res:a}))}},[c,r,g,v]);const R=o.useMemo(()=>p?.slice()?.filter(n=>n?.user?.name?.toLowerCase().includes(h?.toLowerCase())||n?.user?.surname?.toLowerCase().includes(h?.toLowerCase())),[p,h]),U=R?.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{src:te,alt:""})}),e.jsx("td",{children:a?.user?.name}),e.jsx("td",{children:a?.user?.surname}),e.jsx("td",{children:a?.subject.length?e.jsx("div",{className:_.addModal__subject,children:a?.subject[0]?.name}):null}),e.jsx("td",{children:e.jsxs("div",{className:_.check,children:[e.jsx(T,{extraClassName:_.check__input,type:"checkbox",onChange:()=>s(n=>n.filter(L=>L===a.id)[0]?n.filter(L=>L!==a.id):[...n,a.id])}),e.jsx("div",{className:z(_.status,{[_.active]:a?.extra_info?.status}),children:e.jsx("div",{className:z(_.status__inner,{[_.active]:a?.extra_info?.status})})})]})})]}));return e.jsxs(e.Fragment,{children:[e.jsx(M,{setActive:f,active:F,children:e.jsxs(E,{typeSubmit:"",extraClassname:_.addModal,onSubmit:m(b),children:[e.jsx("h2",{children:"Add Group"}),e.jsx(w,{options:u,title:"Groups",register:C,name:"group"}),e.jsx(B,{children:"Tekshirmoq"})]})}),e.jsxs(M,{active:G,setActive:N,extraClass:_.addModal,children:[e.jsx(T,{placeholder:"Search",onChange:a=>S(a.target.value),defaultValue:h}),x?e.jsx(K,{}):e.jsx("div",{className:_.addModal__container,children:e.jsxs(H,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Ism"}),e.jsx("th",{children:"Familya"}),e.jsx("th",{children:"Fanlar"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:U})]})}),e.jsx(B,{extraClass:_.addModal__btn,onClick:q,children:"Add"})]})]})}),De="_timeTable_n2c1a_1",Me="_timeTable__scroll_n2c1a_6",Ae="_timeTableForm_n2c1a_24",qe="_timeTableAddPlus_n2c1a_28",Le="_timeTableFooterBtn_n2c1a_43",k={timeTable:De,timeTable__scroll:Me,timeTableForm:Ae,timeTableAddPlus:qe,timeTableFooterBtn:Le},ut=o.memo(t=>{const{setActive:f,active:F,selectTime:y,setSelectTime:i,weekDays:C}=t,{register:m,handleSubmit:u}=V(),x=A(),{request:p}=$(),r=l(me),c=l(J),v=l(_e),[g,G]=o.useState([1]),N=d=>{let s=Object.entries(d).sort();const h=g.map((S,b)=>({end_time:s[b][1],start_time:s[s.length/2+b][1],room:+s[s.length/4+b][1],week:+s[s.length-(g.length-b)][1],branch:c}));x(ae()),i(h),p(`${P}Students/api/filter_students_subject/?branch=${c}`,"POST",JSON.stringify(h),O()).then(S=>{x(ne(S)),x(I({type:"success",status:!0,msg:"Filterlangan o'quvchilar keldi"})),f(!1)}).catch(S=>{console.log(S),x(I({type:"error",status:!0,msg:"Databazada xatolik yuz berdi"}))})};return e.jsx(M,{setActive:f,active:F,children:e.jsxs(E,{typeSubmit:"",extraClassname:k.timeTable,onSubmit:u(N),children:[e.jsx("h1",{className:k.timeTableHeader,children:"Vaqti Kiritish"}),e.jsx("div",{className:k.timeTable__scroll,children:g.map((d,s)=>{const h=`week${d}`,S=`room${d}`,b=`start_time${d}`,q=`end_time${d}`;return e.jsxs("div",{className:k.timeTableForm,children:[e.jsx(w,{title:"Kunlar",options:C,register:m,name:h,defaultValue:y[s]?.week}),e.jsx(w,{title:"Honalar",options:r,register:m,name:S,defaultValue:y[s]?.room}),e.jsx(T,{type:"time",placeholder:"Boshlanish vaqti",register:m,name:b}),e.jsx(T,{type:"time",placeholder:"Tugash vaqti",register:m,name:q})]})})}),e.jsx("div",{className:k.timeTableAddPlus,onClick:()=>G(d=>[...d,d[d.length-1]+1]),children:e.jsx("i",{className:"fa fa-plus"})}),e.jsx("div",{className:k.timeTableFooterBtn,children:v==="loading"?e.jsx(K,{}):e.jsx(B,{children:"Tekshirmoq"})})]})})});export{ut as G,ct as N,Ye as a,Xe as b,at as c,st as d,dt as e,Ze as f,pe as g,et as h,tt as i,nt as j,rt as k,ot as l,_e as m,it as n,lt as o};
