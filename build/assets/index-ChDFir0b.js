import{R as $,u as k,a as g,r as s,z as G,C as W,E as Y,j as t,F as J,G as u,S as B,I as q,H as K,J as Q,K as X,L as Z,O as ee,P as te,B as O,e as se,A as ae,h as re,Q as ce,o as R}from"./index-CUkZIMn8.js";import{D as oe}from"./multiPageSelector-C9je85pH.js";import{g as le,a as ne}from"./oftenUsedSelector-DDKSaiMY.js";import{P as ie}from"./pagination-BBALUyum.js";import{g as he}from"./searchSelector-CJfw-E7m.js";import{D as ue}from"./deletedTeachers-DVxumuyA.js";import{g as H,a as de,b as ge,c as me,T as fe}from"./teachers-CvOv733M.js";import{M as pe}from"./MultiPage-QJSv2P4o.js";import{C as _e}from"./confirmModal-2O0sEs7y.js";import{E as je}from"./employerCategoryPage-B2F_yrWp.js";import"./link-BlQJGlsH.js";import"./multiPageSlice-CbPka_l6.js";import"./vacancyPageAddThunk-CUnJi8Zh.js";import"./selectors-DKdp24P0.js";import"./index.esm-BRxczUgP.js";const xe=$.memo(({active:v,setActive:a,setIsFilter:C,setActiveSwitch:b,activeSwitch:m})=>{const o=k(),P=g(le),j=g(ne),[l,y]=s.useState(),[f,h]=s.useState(),[r,E]=s.useState("all"),[x,T]=s.useState("all"),{"*":D}=G();function i(e,S,_,I){o(X({subjId:e,langId:S,untilAge:I,fromAge:_})),C(!0)}const A=e=>{e!==r&&(E(e),i(e,x,l,f))},L=e=>{e!==x&&(T(e),i(r,e,l,f))},w=e=>{y(e.target.value),i(r,x,e.target.value,f)},p=e=>{h(e.target.value),i(r,x,l,e.target.value)},F=e=>{b(e),o(Q({userBranchId:D}))};return s.useEffect(()=>{o(W()),o(Y())},[]),t.jsx(J,{active:v,setActive:a,children:t.jsxs("div",{className:u.filter,children:[t.jsx("h1",{children:"Filter"}),t.jsxs("div",{className:u.filter__container,children:[t.jsx(B,{title:"Fan",options:j,extraClass:u.filter__select,onChangeOption:e=>A(e)}),t.jsxs("div",{className:u.filter__age,children:[t.jsx(q,{type:"number",extraClassName:u.filter__input,placeholder:"Yosh (От)",onChange:e=>y(e.target.value),onBlur:w,defaultValue:l}),t.jsx(q,{type:"number",extraClassName:u.filter__input,placeholder:"Yosh (До)",onChange:e=>h(e.target.value),onBlur:p,defaultValue:f})]}),t.jsx(B,{title:"Til",options:P,extraClass:u.filter__select,onChangeOption:e=>L(e)}),t.jsxs("div",{className:u.filter__switch,children:[t.jsx("p",{children:"O’chirilgan"}),t.jsx(K,{onChangeSwitch:F,activeSwitch:m})]})]})]})})}),Se="_teacher_5jqb1_1",Ce="_teacher__filter_5jqb1_14",be="_header_btn_5jqb1_18",Te="_table_5jqb1_21",De="_category_5jqb1_33",ve="_categoryItem_5jqb1_37",d={teacher:Se,teacher__filter:Ce,header_btn:be,table:Te,category:De,categoryItem:ve},ye={teachers:te},ze=()=>{const{theme:v}=Z();g(H);const a=g(he),C=g(de),b=g(ge),m=g(me),o=k(),j=localStorage.getItem("selectedBranch");s.useEffect(()=>{j&&o(ee({userBranchId:j}))},[o,j]);let l=s.useMemo(()=>30,[]);const[y,f]=s.useState([]),[h,r]=s.useState(1),[E,x]=s.useState(),[T,D]=s.useState(),[i,A]=s.useState(!1),[L,w]=s.useState({}),[p,F]=s.useState(!1),[e,S]=s.useState(!1),[_,I]=s.useState(!1),{request:z}=se(),M=s.useMemo(()=>{const n=_?m?.slice():C?.slice();return r(1),a?n.filter(c=>c?.name?.toLowerCase().includes(a.toLowerCase())||c?.surname?.toLowerCase().includes(a.toLowerCase())):n},[C,m,r,a,_]),N=s.useMemo(()=>{const n=_?m?.slice():b?.slice();return r(1),a?n.filter(c=>c?.name?.toLowerCase().includes(a.toLowerCase())||c?.surname?.toLowerCase().includes(a.toLowerCase())):n},[b,m,r,a,_]),U=[{name:"O'qituvchilar",type:"teachers"}],V=()=>{const n=L.id;z(`${ae}Teachers/teachers/delete/${n}/`,"DELETE",null,re()).then(c=>{c.status&&o(ce(n)),o(R({type:c.status?"success":"danger",status:!0,msg:c.msg})),S(!1)}).catch(c=>{o(R({type:"danger",status:!0,msg:c.msg}))})};return t.jsx(oe,{reducers:ye,children:t.jsxs(pe,{types:U,page:"teachers",children:[t.jsxs("div",{className:d.teacher,children:[t.jsxs("div",{className:d.teacher__filter,children:[p?null:t.jsx(O,{status:"filter",extraClass:d.extraCutClassFilter,onClick:()=>D(!T),type:"filter",children:"Filter"}),t.jsx("div",{className:d.header_btn,children:t.jsx(O,{extraClass:d.category,type:"simple",onClick:()=>F(!p),children:"Toifa"})})]}),t.jsxs("div",{className:d.table,children:[t.jsx("h2",{children:p?"Toifa ":i?"Deleted Teachers":"Teachers"}),p?t.jsx(je,{extraClass:d.categoryItem}):i?t.jsx(ue,{data:N?.slice((h-1)*l,h*l)}):t.jsx(fe,{setActiveDelete:w,setActiveModal:S,theme:v==="app_school_theme",loading:H,data:M?.slice((h-1)*l,h*l)})]}),t.jsx(ie,{setCurrentTableData:f,users:i?N:M,search:a,setCurrentPage:r,currentPage:h,pageSize:l,onPageChange:n=>{r(n)},type:"custom"}),t.jsx(xe,{setIsFilter:I,activeSwitch:i,setActiveSwitch:A,setActive:D,active:T})]}),t.jsx(_e,{setActive:S,active:e,onClick:V,type:"danger"})]})})};export{ze as TeachersPage};
