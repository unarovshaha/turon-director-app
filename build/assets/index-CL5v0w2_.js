import{R as C,b as k,aO as $,r as h,b8 as A,a as p,q as O,g as T,u as E,j as i,N as w,a4 as z,M as q,b9 as R,ba as b,d as D,s as M,bb as y,bc as U,aW as B,bd as P,be as J,bf as V,bg as W,bh as F,aw as G}from"./index-BEMsgrdT.js";import{L as H}from"./link-DtgHQwc3.js";import{c as K,g as Q,b as X}from"./userProfileSelector-DVds6RNm.js";import{_ as Y,a as Z,b as ss}from"./TransitionGroupContext-CXeTsCR6.js";import{f as es,T as ts}from"./Transition-BWmB4V01.js";function ns(e,n){return e.classList?!!n&&e.classList.contains(n):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+n+" ")!==-1}function as(e,n){e.classList?e.classList.add(n):ns(e,n)||(typeof e.className=="string"?e.className=e.className+" "+n:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+n))}function S(e,n){return e.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function rs(e,n){e.classList?e.classList.remove(n):typeof e.className=="string"?e.className=S(e.className,n):e.setAttribute("class",S(e.className&&e.className.baseVal||"",n))}var is=function(n,c){return n&&c&&c.split(" ").forEach(function(s){return as(n,s)})},x=function(n,c){return n&&c&&c.split(" ").forEach(function(s){return rs(n,s)})},j=function(e){Y(n,e);function n(){for(var s,o=arguments.length,_=new Array(o),l=0;l<o;l++)_[l]=arguments[l];return s=e.call.apply(e,[this].concat(_))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(t,a){var r=s.resolveArguments(t,a),f=r[0],m=r[1];s.removeClasses(f,"exit"),s.addClass(f,m?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(t,a)},s.onEntering=function(t,a){var r=s.resolveArguments(t,a),f=r[0],m=r[1],u=m?"appear":"enter";s.addClass(f,u,"active"),s.props.onEntering&&s.props.onEntering(t,a)},s.onEntered=function(t,a){var r=s.resolveArguments(t,a),f=r[0],m=r[1],u=m?"appear":"enter";s.removeClasses(f,u),s.addClass(f,u,"done"),s.props.onEntered&&s.props.onEntered(t,a)},s.onExit=function(t){var a=s.resolveArguments(t),r=a[0];s.removeClasses(r,"appear"),s.removeClasses(r,"enter"),s.addClass(r,"exit","base"),s.props.onExit&&s.props.onExit(t)},s.onExiting=function(t){var a=s.resolveArguments(t),r=a[0];s.addClass(r,"exit","active"),s.props.onExiting&&s.props.onExiting(t)},s.onExited=function(t){var a=s.resolveArguments(t),r=a[0];s.removeClasses(r,"exit"),s.addClass(r,"exit","done"),s.props.onExited&&s.props.onExited(t)},s.resolveArguments=function(t,a){return s.props.nodeRef?[s.props.nodeRef.current,t]:[t,a]},s.getClassNames=function(t){var a=s.props.classNames,r=typeof a=="string",f=r&&a?a+"-":"",m=r?""+f+t:a[t],u=r?m+"-active":a[t+"Active"],g=r?m+"-done":a[t+"Done"];return{baseClassName:m,activeClassName:u,doneClassName:g}},s}var c=n.prototype;return c.addClass=function(o,_,l){var t=this.getClassNames(_)[l+"ClassName"],a=this.getClassNames("enter"),r=a.doneClassName;_==="appear"&&l==="done"&&r&&(t+=" "+r),l==="active"&&o&&es(o),t&&(this.appliedClasses[_][l]=t,is(o,t))},c.removeClasses=function(o,_){var l=this.appliedClasses[_],t=l.base,a=l.active,r=l.done;this.appliedClasses[_]={},t&&x(o,t),a&&x(o,a),r&&x(o,r)},c.render=function(){var o=this.props;o.classNames;var _=Z(o,["classNames"]);return C.createElement(ts,ss({},_,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(C.Component);j.defaultProps={classNames:""};j.propTypes={};const I={director:"director"},os=[{to:"dashboard",name:"Dashboard",icon:"fas fa-dashboard",system:["school"],roles:[I.director]},{to:"accounting",name:"Buxgalteriya ",icon:"fa-calculator",system:["center","school"],roles:[I.director],branches:!0,multi:!0}],cs="_menu_fi6pz_1",ls="_menu__user_fi6pz_12",us="_userImage_fi6pz_22",_s="_userInfo_fi6pz_27",ds="_menu__inner_fi6pz_33",ms="_link_fi6pz_58",fs="_active_fi6pz_64",ps="_link__href_fi6pz_72",hs="_link__title_fi6pz_83",gs="_menu__footer_fi6pz_87",vs="_menu__exit_fi6pz_104",d={menu:cs,menu__user:ls,userImage:us,userInfo:_s,menu__inner:ds,link:ms,active:fs,link__href:ps,link__title:hs,menu__footer:gs,menu__exit:vs},xs=()=>{const e=k(),{pathname:n}=$(),{theme:c}=h.useContext(A);p(O),p(K);const s=p(Q);p(X);const o=localStorage.getItem("user_id"),_=JSON.parse(localStorage.getItem("selectedSystem")),l=JSON.parse(localStorage.getItem("selectedLocations")),t=p(T),a=E(),r=()=>{e("/login"),a(R())},m=h.useCallback(()=>os.map((u,g)=>{if(l?.length>1&&!u.multi||l?.length>1&&u.multi||`${t?.id}`,!(l>1&&!u.branches)&&u?.system.includes(_?.name)&&(typeof u.roles=="object"&&s?.job.some(v=>u.roles.includes(v))||typeof u.roles=="boolean"&&u.roles))return i.jsx(w,{to:u.to,className:({isActive:v})=>v?`${d.link} ${d.active}`:`${d.link}`,children:i.jsxs("span",{className:d.link__href,children:[i.jsx("i",{className:`fas ${u.icon} icon-link`}),i.jsx("span",{className:d.link__title,children:u.name})]})},g)}),[c,l,t,s])();return i.jsxs("nav",{className:d.menu,children:[i.jsxs("div",{className:d.menu__user,children:[i.jsx(H,{to:`profile/${o}`,children:i.jsx("img",{className:d.userImage,src:s?.profile_img??z,alt:""})}),i.jsxs("div",{className:d.userInfo,children:[i.jsx("h3",{children:s?.username}),i.jsx("p",{children:s?.job[0]})]})]}),i.jsx("ul",{className:d.menu__inner,children:s?.job?m:i.jsx(q,{})}),i.jsx("div",{className:d.menu__footer,children:i.jsxs("div",{className:d.menu__exit,onClick:r,children:[i.jsx("i",{className:"fas fa-sign-out-alt"}),i.jsx("h2",{children:"Chiqish"})]})})]})},Cs="_main_13nn4_1",Ns="_main__content_13nn4_7",L={main:Cs,main__content:Ns},Es="_alerts_1qlt2_1",js="_alert_1qlt2_1",bs="_success_1qlt2_29",Ss="_warning_1qlt2_33",Is="_show_1qlt2_37",Ls="_slideIn_1qlt2_1",ks="_hide_1qlt2_42",$s="_slideOut_1qlt2_1",N={alerts:Es,alert:js,success:bs,warning:Ss,show:Is,slideIn:Ls,hide:ks,slideOut:$s},As=e=>e.alertSlice?.alert,Os=()=>{const e=p(As);return i.jsx("div",{className:N.alerts,children:e?.map((n,c)=>i.jsx(Ts,{alert:n,index:c}))})},Ts=C.memo(({alert:e,index:n})=>{const c=h.useRef(null),s=E(),o=_=>{s(b({index:_}))};return h.useEffect(()=>{const _=setTimeout(()=>{s(b({index:n}))},(n+1)*3e3);return()=>clearTimeout(_)},[e]),i.jsx(j,{in:e.status,nodeRef:c,timeout:400,classNames:"alert",unmountOnExit:!0,children:i.jsxs("div",{ref:c,className:D(N.alert,N[e.type]),children:[i.jsx("p",{children:e.msg}),i.jsx("i",{className:"fa-solid fa-xmark",onClick:()=>o(n)})]},n)})}),Ms=()=>{const e=localStorage.getItem("user_id");p(M);const n=p(y),c=JSON.parse(localStorage.getItem("selectedLocations"));p(U),p(B);const s=JSON.parse(localStorage.getItem("selectedSystem")),o=E();return h.useEffect(()=>{e&&o(P(e))},[e]),h.useEffect(()=>{n||o(J())},[n]),h.useEffect(()=>{s.id&&o(V(s.id))},[s?.id]),h.useEffect(()=>{c[0]?.id?o(W(c[0].id)):o(F())},[c?.[0].id]),i.jsxs(i.Fragment,{children:[i.jsx(Os,{}),i.jsx(xs,{}),i.jsx("main",{className:L.main,children:i.jsx("div",{className:L.main__content,children:i.jsx(G,{})})})]})};export{Ms as Layout};
