import{c as P,e as m,A as x,h as _,a as S,j as a,T as B,D as E,k,r,u as v,z as D,F as T,a3 as A,I as N}from"./index-CTtC1zcc.js";import{L as $}from"./link-BQL38z-k.js";import{u as w}from"./index.esm-X1Z8qUg7.js";const L="_mainContainer_b5ajw_1",I="_mainContainer_buttonPanelBox_b5ajw_8",F="_mainContainer_buttonPanelBox_leftCreateButton_b5ajw_15",U="_mainContainer_tablePanelBox_b5ajw_50",z="_changeSalary_b5ajw_65",l={mainContainer:L,mainContainer_buttonPanelBox:I,mainContainer_buttonPanelBox_leftCreateButton:F,mainContainer_tablePanelBox:U,changeSalary:z},c=P("employerSalarySlice/fetchEmployerSalaryThunk",async t=>{const{request:e}=m();return await e(`${x}Users/user-salary/${t}/`,"GET",null,_())}),R=t=>t.employerSalarySlice?.salaryData,q=t=>t.employerSalarySlice?.loading,H="_theadBody_ztda7_1",M={theadBody:H},O=({currentTableData:t,setActiveEdit:e,setActive:n})=>{const d=S(q),u=()=>t?.map((s,o)=>a.jsx("tr",{children:d?a.jsx(E,{}):a.jsxs(a.Fragment,{children:[a.jsx("td",{children:o+1}),a.jsx($,{to:`giveSalaryPage/${s.id}/${s.permission}`,children:a.jsx("td",{children:s.total_salary})}),a.jsx("td",{children:s.taken_salary}),a.jsx("td",{children:s.remaining_salary}),a.jsx("td",{children:s.date}),a.jsx("td",{children:a.jsx("i",{onClick:()=>{n(!0),e(s)},className:"fa fa-pen"})})]})},o+1));return a.jsxs(B,{children:[a.jsx("thead",{className:M.theadBody,children:a.jsxs("tr",{children:[a.jsx("th",{children:"â„–"}),a.jsx("th",{children:"Umumiy oylik"}),a.jsx("th",{children:"Olingan oylik"}),a.jsx("th",{children:"Qolgan oylik"}),a.jsx("th",{children:"Sana"}),a.jsx("th",{})]})}),a.jsx("tbody",{children:u()})]})},G={salaryData:[],loading:!1,erroor:null},J=k({name:"teacherSalarySlice",initialState:G,reducers:{onEditSalary:(t,e)=>{t.salaryData=t.salaryData.map(n=>n.id===e.payload.id?e.payload.data:n)}},extraReducers:t=>{t.addCase(c.pending,e=>{e.loading=!0}).addCase(c.fulfilled,(e,n)=>{e.loading=!1,e.salaryData=n.payload}).addCase(c.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message})}}),{onEditSalary:Q}=J.actions,Y=()=>{const[t,e]=r.useState(!1),[n,d]=r.useState(!1),{setValue:u,register:s,handleSubmit:o}=w();let j=r.useMemo(()=>20,[]);const[g,V]=r.useState(1),y=v(),p=S(R),{id:h}=D(),{request:C}=m();r.useEffect(()=>{u("total_salary",n.total_salary)},[t,n]),r.useEffect(()=>{h&&y(c(h))},[y,h]);const f=b=>{C(`${x}Users/salaries/update1/${n.id}`,"PATCH",JSON.stringify(b),_()).then(i=>{console.log(i),e(!1),y(Q({id:n.id,data:i}))}).catch(i=>{console.log(i)})};return a.jsxs("div",{className:l.mainContainer,children:[a.jsx("div",{className:l.mainContainer_buttonPanelBox,children:a.jsx("div",{className:l.mainContainer_buttonPanelBox_leftCreateButton})}),a.jsx("div",{className:l.mainContainer_tablePanelBox,children:a.jsx(O,{setActive:e,setActiveEdit:d,currentTableData:p,currentPage:g,PageSize:j})}),a.jsxs(T,{setActive:e,active:t,children:[a.jsx("h2",{children:"Change Salary"}),a.jsx(A,{extraClassname:l.changeSalary,onSubmit:o(f),children:a.jsx(N,{placeholder:"Summa",type:"number",register:s,name:"total_salary"})})]})]})};export{Y as EmployerSalaryPage};
