import{j as e,B as E,F as b,a3 as M,I as p,r as n,S as k,a as g,u as R,D as T,e as L,A as O,h as H,g as Z,b as ee,o as ae}from"./index-BM3qoPaZ.js";import{g as B,a as te,b as se,c as ne,C as ie,d as re,e as ce,f as le,h as oe,i as de,j as me,k as ue,l as pe,m as ge,n as xe,o as he,p as je}from"./capitalSelector-ahHqqZ5s.js";import{u as D}from"./index.esm-D0zpTM6p.js";import{u as $}from"./index-ciE70Z9_.js";import{g as _e}from"./branchCreateSlice-B2WRecz7.js";import{g as fe}from"./branchSelector-u3o7YCHK.js";import"./confirmModal-CQUKf-gX.js";const ye=({caunt:t,active:s,setActiveModal:a,isCanAdd:i})=>e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{onClick:()=>a(!s),children:e.jsx("i",{className:"fa fa-plus"}),type:"editPlus"})}),e.jsxs("div",{style:{padding:"2rem 0",display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsx("h1",{style:{fontWeight:"bolder"},children:"Capital"}),e.jsxs("span",{style:{fontSize:"1.8rem",display:"flex",gap:"4rem"},children:["Jami (Down cost): ",t]})]})]}),Ce="_categoryHeader_zblkj_1",Ie={categoryHeader:Ce},ve=({setActiveModal:t,activeModal:s})=>e.jsxs("div",{className:Ie.categoryHeader,children:[e.jsx("h2",{children:"Qo'shimcha kategoriyalar"}),e.jsx(E,{onClick:()=>t(!s),type:"editPlus",children:e.jsx("i",{className:"fa fa-plus"})})]}),Se="_capitalMain_18vau_1",be="_items__item_18vau_9",Me="_form_18vau_25",De="_loader_18vau_47",Ne="_loader__circle_18vau_51",j={capitalMain:Se,items__item:be,form:Me,loader:De,loader__circle:Ne},F=({setActiveModal:t,activeModal:s,changeItem:a,setChangedImages:i,handleSubmit:r,onClick:l,register:c})=>e.jsx("div",{children:e.jsxs(b,{setActive:t,active:s,children:[e.jsx("h1",{children:"Add"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",padding:"2rem"},children:[e.jsx(Ae,{status:s,image:a?.images,setChangedImages:i}),e.jsxs(M,{extraClassname:j.form,onSubmit:r(l),children:[e.jsx(p,{required:!0,register:c,name:"name",placeholder:"Name"}),e.jsx(p,{required:!0,register:c,name:"id_number",placeholder:"Id number"})]})]})]})}),Ae=({index:t,setChangedImages:s,image:a,status:i})=>{n.useEffect(()=>{i&&l({})},[i]);const[r,l]=n.useState({}),{getInputProps:c,getRootProps:m}=$({onDrop:o=>{l(o[0]),s(o[0])}}),d=n.useCallback(({img:o,image:u})=>o?.path?e.jsx("img",{src:URL.createObjectURL(o),alt:""}):i?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"far fa-image"}),e.jsx("input",{required:!0,type:"file",...c()})]}):u?.url?e.jsx("img",{src:u.url,alt:""}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"far fa-image"}),e.jsx("input",{type:"file",...c()})]}),[r,a]);return e.jsx("div",{className:j.items__item,...m(),children:e.jsx(d,{img:r,image:a})})},Pe="_capitalInside_lr226_1",ke="_items__item_lr226_8",qe="_form_lr226_24",C={capitalInside:Pe,items__item:ke,form:qe},Ee=n.memo(({setActiveModal:t,activeModal:s,register:a,handleSubmit:i,onClick:r,changeItem:l,setChangedImages:c,options:m,setSelectPayment:d,branches:o,setSelectedBranches:u})=>e.jsxs(b,{setActive:t,active:s,children:[e.jsx("h1",{children:"Add"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",padding:"2rem",alignItems:"center"},children:[e.jsx(w,{status:s,image:l?.images,setChangedImages:c}),e.jsxs(M,{extraClassname:C.form,onSubmit:i(r),children:[e.jsx(p,{register:a,required:!0,name:"name",placeholder:"Nomi"}),e.jsx(k,{options:o,onChangeOption:u,title:"Branch ni tanlang"}),e.jsx(p,{register:a,required:!0,name:"id_number",type:"number",placeholder:"Raqami"}),e.jsx(p,{register:a,required:!0,name:"price",type:"number",placeholder:"Narxi"}),e.jsx(p,{register:a,required:!0,name:"total_down_cost",type:"number",placeholder:"Jami umumiy xarajat"}),e.jsx(p,{register:a,required:!0,name:"term",type:"number",placeholder:"Muddati (yil)"}),e.jsx(p,{register:a,required:!0,name:"curriculum_hours",placeholder:"Sanasi",type:"number"}),e.jsx(k,{options:m,onChangeOption:d,title:"To'lov turi"})]})]})]})),w=({index:t,setChangedImages:s,image:a,status:i})=>{n.useEffect(()=>{i&&l({})},[i]);const[r,l]=n.useState({}),{getInputProps:c,getRootProps:m}=$({onDrop:o=>{l(o[0]),s(o[0])}}),d=n.useCallback(({img:o,image:u})=>o?.path?e.jsx("img",{src:URL.createObjectURL(o),alt:""}):i?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"far fa-image"}),e.jsx("input",{name:"file",type:"file",...c()})]}):u?.url?e.jsx("img",{src:u.url,alt:""}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"far fa-image"}),e.jsx("input",{type:"file",...c()})]}),[r,a]);return e.jsx("div",{className:C.items__item,...m(),children:e.jsx(d,{img:r,image:a})})},Re=n.memo(({register:t,handleSubmit:s,onClick:a,editModal:i,setEditModal:r,changeItem:l,setChangedImages:c})=>e.jsxs(b,{setActive:r,active:i,children:[e.jsx("h1",{children:"Change"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",padding:"2rem"},children:[e.jsx(w,{status:i,image:l?.images,setChangedImages:c}),e.jsxs(M,{extraClassname:C.form,onSubmit:s(a),children:[e.jsx(p,{register:t,name:"name"}),e.jsx(p,{register:t,name:"id_number"})]})]})]})),ze=n.memo(()=>{const{register:t,setValue:s,handleSubmit:a}=D(),i=g(B),r=R(),[l,c]=n.useState(!1),[m,d]=n.useState({}),[o,u]=n.useState([]),_=g(te);n.useEffect(()=>{r(se())},[]);const h=g(ne),N=f=>{c(!l),s("name",""),s("id_number",""),r(re({data:f,changedImages:o}))},I=()=>i===!0?e.jsx("div",{className:j.loader,children:e.jsx("div",{className:j.loader__circle,children:e.jsx("div",{})})}):e.jsx("div",{children:h?.length});return e.jsxs("div",{className:j.capitalMain,children:[e.jsx(ye,{caunt:I(),setActiveModal:c,active:l,isCanAdd:_[0]?.add_capitalcategory}),i?e.jsx(T,{}):e.jsx(ie,{isCanView:_[0]?.view_capitalcategory,capitalData:h}),e.jsx(F,{changeItem:m,setChangedImages:u,onClick:N,register:t,handleSubmit:a,setActiveModal:c,activeModal:l})]})}),Te=()=>{const[t,s]=n.useState(!1),{register:a,setValue:i,handleSubmit:r}=D(),{request:l}=L(),c=m=>{l(`${O}Capital/capital_category/`,"POST",JSON.stringify(m),H()).then(d=>{console.log(d)}).catch(d=>{console.log(d)})};return e.jsxs("div",{children:[e.jsx(ve,{activeModal:t,setActiveModal:s}),e.jsx(F,{activeModal:t,setActiveModal:s,register:a,handleSubmit:r,onClick:c})]})},q=[{name:"category",label:"Category"},{name:"subCategory",label:"Sub Category"}],Je=n.memo(()=>{const t=R(),{register:s,setValue:a,handleSubmit:i}=D(),{id:r}=g(Z),{request:l}=L(),c=ee(),m=g(ce),d=g(le);n.useEffect(()=>{t(oe(r)),t(de()),t(me(r)),t(_e())},[]);const o=g(ue),u=g(B),_=g(fe),[h,N]=n.useState({}),[I,f]=n.useState([]),[U,V]=n.useState(),[Le,Oe]=n.useState([]),[A,z]=n.useState(q[0].name),[P,v]=n.useState(!1),[y,S]=n.useState(!1),[J,Q]=n.useState([]),W=()=>{l(`${O}Capital/capital_category/${r}/`,"DELETE",null,H()).then(x=>{t(ae({type:"success",status:!0,msg:x.msg})),c(-2)}).catch(x=>{console.log(x)})},G=x=>{v(!1),t(he({data:x,changedImages:I,selectPayment:U,selectedBranches:J,id:r})),a("name",""),a("id_number",""),a("price",""),a("total_down_cost",""),a("term",""),a("curriculum_hours","")},K=()=>u?e.jsx(T,{}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{onDelete:W,editModal:y,setEditModal:()=>S(!y),capitalData:o}),e.jsx(xe,{addModal:P,setAddModal:v,capitalData:m})]}),X=x=>{S(!y),t(je({data:x,id:r})),a("name",""),a("id_number","")},Y=K();return e.jsxs("div",{className:C.capitalInside,children:[e.jsx(pe,{activeMenu:A,setActiveMenu:z,categoryMenu:q}),A==="category"?Y:e.jsx(Te,{}),e.jsx(Ee,{setSelectPayment:V,register:s,handleSubmit:i,onClick:G,activeModal:P,setActiveModal:v,setChangedImages:f,changeItem:h,options:d,branches:_,setSelectedBranches:Q}),e.jsx(Re,{register:s,handleSubmit:i,onClick:X,editModal:y,setEditModal:S,setChangedImages:f,changeItem:h})]})});export{Je as CapitalInside,ze as CapitalPage};
