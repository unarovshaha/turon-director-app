import{r as a,j as e,d as p,T as E,I as C,c as w,e as S,A as F,h as g,k as O,z as H,u as R,a as I,C as q,O as G,F as B,G as j,S as k}from"./index-DMNo7Djr.js";import"./groupsList-CguXKXwi.js";import"./pagination-D7QdfpUG.js";import"./textArea-BjD0uZnN.js";import{a as P}from"./oftenUsedSelector-DDKSaiMY.js";import{a as U}from"./teachers-CY3TjWvG.js";const V="_accordion_nysnm_1",z="_header_nysnm_8",J="_info_nysnm_18",M="_title_nysnm_35",K="_btns_nysnm_44",Q="_arrow_nysnm_50",W="_active_nysnm_54",X="_wrapper_nysnm_62",i={accordion:V,header:z,info:J,title:M,btns:K,arrow:Q,active:W,wrapper:X},Y=({title:s,subtitle:t,children:o,backOpen:n,setBackOpen:d,clazz:_,btns:u,number:f})=>{const[c,m]=a.useState(!1),v=a.useRef(),N=x=>{x.target.tagName!=="BUTTON"&&(n!==void 0?d(!n):m(!c))};return e.jsxs("div",{className:p(i.accordion,_,{[i.active]:n||c}),children:[e.jsxs("div",{className:i.header,children:[e.jsxs("div",{className:i.info,children:[e.jsx("span",{children:f}),s?e.jsx("div",{className:i.title,children:s}):null]}),e.jsxs("div",{className:i.btns,children:[t&&e.jsx("div",{className:i.checkbox,children:t}),u?.map(x=>x),e.jsx("div",{onClick:N,className:p(i.arrow,{[i.active]:n||c}),children:e.jsx("i",{className:"fas fa-angle-down"})})]})]}),e.jsx("div",{style:n||c?{height:v.current?.scrollHeight}:{height:"0px"},ref:v,className:i.wrapper,children:e.jsx("div",{children:o})})]})},Z="_flowList_1lms2_1",ee="_flowList__container_1lms2_4",se="_flowList__input_1lms2_9",te="_status_1lms2_12",ce="_active_1lms2_21",ae="_status__inner_1lms2_24",r={flowList:Z,flowList__container:ee,flowList__input:se,status:te,active:ce,status__inner:ae},Se=a.memo(({flowList:s,number:t,onChangeSingle:o,onChangeAll:n,currentPage:d})=>{const[_,u]=a.useState(!1);a.useEffect(()=>{u(!1)},[d]);const f=()=>s?.students?.map((c,m)=>e.jsxs("tr",{children:[e.jsx("td",{children:m+1}),e.jsxs("td",{children:[c?.name," ",c?.surname]}),e.jsx("td",{children:c?.phone}),e.jsx("td",{children:e.jsxs("div",{className:r.flowList__container,children:[e.jsx(C,{extraClassName:r.flowList__input,type:"checkbox",onChange:()=>o(c?.id,s?.id),checked:c?.isCheck?c?.isCheck:s?.isCheck,disabled:c?.extra_info?!c?.extra_info?.status:!1}),c?.extra_info?e.jsx("div",{className:p(r.status,{[r.active]:c?.extra_info?.status}),children:e.jsx("div",{className:p(r.status__inner,{[r.active]:c?.extra_info?.status})})}):null]})})]}));return e.jsx("div",{className:r.flowList,children:e.jsx(Y,{setBackOpen:u,backOpen:_,number:t+1,title:`${s?.class_number} ${s?.color}`,subtitle:e.jsx(C,{type:"checkbox",onChange:()=>n(s?.id),checked:s?.isCheck}),children:e.jsxs(E,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Telefon Numer"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:f()})]})})})}),Fe=w("flowsSlice/fetchFlows",async s=>{const{request:t}=S();return await t(`${F}Flow/flow-list/?branch=${s}`,"GET",null,g())}),ne=w("flowsSlice/fetchFilterFlow",({subject:s,teacher:t})=>{const{request:o}=S();return o(`${F}Flow/flow-list/?subject=${s}&teacher=${t}`,"GET",null,g())});w("flowsSlice/fetchFilterFlows",()=>{const{request:s}=S();return s(`${F}`,"GET",null,g())});const ge=w("flowsSlice/flowListThunk",async({data:s})=>{const{request:t}=S();return await t(`${F}Flow/flow-list-create/`,"POST",JSON.stringify(s),g())}),le={subjectId:null,teacherId:null,isDelete:!1},ie=O({name:"flowFilterSlice",initialState:le,reducers:{getSubjectId:(s,t)=>{s.subjectId=t.payload},getTeacherId:(s,t)=>{s.teacherId=t.payload},getIsDelete:(s,t)=>{s.isDelete=t.payload}}}),{getSubjectId:oe,getTeacherId:re,getIsDelete:ve}=ie.actions,Te=a.memo(({active:s,setActive:t})=>{const{"*":o}=H(),n=R();I(P);const d=I(U);a.useEffect(()=>{n(q()),n(G({userBranchId:o}))},[o]);const[_,u]=a.useState(),[f,c]=a.useState(),[m,v]=a.useState(),[N,x]=a.useState(),[T,$]=a.useState("all"),[h,D]=a.useState("all"),[de,he]=a.useState(!1),[ue,_e]=a.useState(!1);function y(l,b){n(ne({subject:l,teacher:b}))}const L=l=>{l!==T&&($(l),y(l,h?.id??h),n(oe(l)))},A=l=>{l!==h&&(D(d.filter(b=>b.id===+l)[0]),y(T,l),n(re(l)))};return e.jsx(B,{active:s,setActive:t,children:e.jsxs("div",{className:j.filter,children:[e.jsx("h1",{children:"Filter"}),e.jsxs("div",{className:j.filter__container,children:[e.jsx(k,{title:"Teacher",extraClass:j.filter__select,onChangeOption:A,defaultValue:h?.id??h,options:[{name:"Hamma",id:"all"},...d]}),e.jsx(k,{title:"Fan",extraClass:j.filter__select,onChangeOption:L,defaultValue:T,options:[{name:"Hamma",id:"all"},...h?.subject??[]]})]})]})})});export{Se as F,Fe as a,Te as b,ge as f};
