import{j as e,b as U,a as p,r as n,T as E,F as K,S as N,B as w,k as ee,u as A,bk as se,at as ae,aO as te,D as ne,e as B,A as L,h as $,o as Y,g as I,d as re,au as ce,av as z}from"./index-BEMsgrdT.js";import{E as q}from"./editableCard-DlgsnufH.js";import{P as R}from"./pagination-BpSo2iSn.js";import{a as le,o as ie,b as Z,g as oe,e as de,c as he,d as _e,f as me,t as ue,h as xe,i as pe,j as ye,k as J,l as je,m as ge,n as be,p as fe,q as ve}from"./otchotAccountingSlice-B1nS8xwn.js";import{i as Se,f as W}from"./capitalSelector-BiN0U67k.js";import{c as Ce,g as Te,D as H}from"./multiPageSelector-Df3lElIL.js";import{f as ke,m as Ne}from"./multiPageSlice-CfDJPCVP.js";import{g as Q}from"./searchSelector-CJfw-E7m.js";import{C as G}from"./confirmModal-BVLRU1gM.js";import"./teachers-BUFCUfIu.js";import"./seq-CgrMb3pt.js";import{D as De}from"./deletedTeachers-BUQc4tr8.js";import{L as V}from"./link-DtgHQwc3.js";import{u as Pe}from"./index.esm-DWlg3cF3.js";const Ae="_main_1bpn5_1",Oe="_main__header_1bpn5_8",Ee="_main__header__article_1bpn5_13",Fe="_main__header__para_1bpn5_19",we="_main__card_1bpn5_24",Me="_main__card__header_1bpn5_35",Le="_main__card__header__span_1bpn5_40",$e="_main__card__header__content_1bpn5_50",Ie="_main__card__content_1bpn5_56",ze="_main__card__content__box_1bpn5_62",qe="_main__card__content__box__header_1bpn5_72",Ue="_main__card__content__box__inner_1bpn5_92",Be="_main__card__content__box__inner__sum_1bpn5_98",Re="_main__card__content__box__inner__sum__handler_1bpn5_113",He="_main__summary_1bpn5_126",Qe="_main__summary__arounder_1bpn5_141",Ye="_main__summary__arounder__box_1bpn5_148",Je="_main__summary__arounder__box__header_1bpn5_156",f={main:Ae,main__header:Oe,main__header__article:Ee,main__header__para:Fe,main__card:we,main__card__header:Me,main__card__header__span:Le,main__card__header__content:$e,main__card__content:Ie,main__card__content__box:ze,main__card__content__box__header:qe,main__card__content__box__inner:Ue,main__card__content__box__inner__sum:Be,main__card__content__box__inner__sum__handler:Re,main__summary:He,main__summary__arounder:Qe,main__summary__arounder__box:Ye,main__summary__arounder__box__header:Je},Ve=({data:s})=>{const r=t=>new Intl.NumberFormat("uz-UZ",{style:"currency",currency:"UZS",minimumFractionDigits:0,maximumFractionDigits:0}).format(t),d=t=>t.list.reduce((h,c)=>h+c.list.reduce((i,y)=>i+y.summa,0),0),o=(t,h=!1)=>{switch(t){case"studentsPayments":return{backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0"};case"teachersSalary":return{backgroundColor:"#eff6ff",border:" 1px solid #bfdbfe"};case"employeesSalary":return{backgroundColor:"#f5f3ff",border:" 1px solid #ddd6fe"};case"overhead":return{backgroundColor:"#fff7ed",border:" 1px solid #fed7aa"};case"capital":return{backgroundColor:"#fef2f2",border:" 1px solid #fecaca"};default:return{backgroundColor:"#f9fafb",border:"1px solid #e5e7eb"}}},a=t=>{switch(t){case"studentsPayments":return e.jsx("i",{style:{color:"black"},className:"fa-solid fa-graduation-cap"});case"teachersSalary":return e.jsx("i",{style:{color:"black"},className:"fa-solid fa-users"});case"employeesSalary":return e.jsx("i",{style:{color:"black"},className:"fa-solid fa-user-check"});case"overhead":return e.jsx("i",{style:{color:"black"},className:"fa-solid fa-building-shield"});case"capital":return e.jsx("i",{style:{color:"black"},className:"fa-solid fa-arrow-trend-up"});default:return e.jsx("i",{style:{color:"black"},className:"fa-solid fa-building-shield"})}},x=()=>s?.map((t,h)=>e.jsxs(q,{style:o(t.type,!0),extraClass:f.main__card,titleType:"",children:[e.jsxs("div",{className:f.main__card__header,children:[e.jsxs("span",{className:f.main__card__header__span,children:[a(t.type),e.jsx("h2",{children:t.name})]}),e.jsx("span",{className:f.main__card__header__content,children:e.jsxs("h3",{children:["Total: ",r(d(t))]})})]}),e.jsx("div",{className:f.main__card__content,children:t.list.map((c,i)=>e.jsxs(q,{extraClass:f.main__card__content__box,titleType:"",children:[e.jsxs("div",{className:f.main__card__content__box__header,children:[e.jsx("h2",{children:c.name}),e.jsxs("span",{children:[c.list[0]?.count||0," items"]})]}),e.jsx("div",{className:f.main__card__content__box__inner,children:c.list.map(y=>e.jsxs("div",{className:f.main__card__content__box__inner__sum,children:[e.jsx("h3",{children:"Amount"}),e.jsx("h4",{style:y.summa===0?{color:"#ccc"}:{color:"#39ae60"},children:r(y.summa)}),y.summa===0?e.jsx("span",{className:f.main__card__content__box__inner__sum__handler,children:"Ma'lumot topilmadi"}):null]}))})]}))})]}));return e.jsxs("div",{className:f.main,children:[e.jsxs("div",{className:f.main__header,children:[e.jsx("h1",{className:f.main__header__article,children:"Moliyaviy panel"}),e.jsx("p",{className:f.main__header__para,children:"Barcha filiallar bo'yicha to'lovlar va xarajatlarning umumiy ko'rinishi"})]}),x(),e.jsxs(q,{extraClass:f.main__summary,titleType:"",children:[e.jsx("h1",{children:"Moliyaviy xulosa"}),e.jsx("div",{className:f.main__summary__arounder,children:s?.map((t,h)=>e.jsxs(q,{extraClass:f.main__summary__arounder__box,titleType:"",children:[e.jsxs("span",{className:f.main__summary__arounder__box__header,children:[a(t.type),e.jsx("h2",{children:t.name})]}),e.jsx("h3",{children:r(d(t))})]}))})]})]})},Ke="_empSalary_1ptrr_1",Ze="_cash_1ptrr_5",We="_changeType_1ptrr_24",M={empSalary:Ke,cash:Ze,changeType:We},Ge=({changingData:s,filteredSalary:r,sum2:d,formatSalary:o,onChange:a,changePayment:x,setChangePayment:t,setChangingData:h,setActiveDelete:c,activeDelete:i,getCapitalType:y})=>{const u=U(),l=p(Q);let j=n.useMemo(()=>50,[]);const[v,T]=n.useState([]),[P,k]=n.useState(1),[F,b]=n.useState(null),_=n.useMemo(()=>{const m=r?.slice();return k(1),l?m.filter(D=>D?.user?.name.toLowerCase().includes(l.toLowerCase())):m},[r,k,l]),S=v?.map((m,D)=>e.jsx(e.Fragment,{children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:D+1}),e.jsxs("td",{onClick:()=>u(`../../employer/employerProfile/${m?.user?.id}`),children:[m?.user?.name," ",m.user.surname]}),e.jsx("td",{children:m?.salary}),e.jsx("td",{children:m?.date}),e.jsx("td",{children:m?.user?.job?.length?m?.user?.job:"ish turi mavjud emas"}),e.jsx("td",{children:e.jsx("div",{onClick:()=>{h({id:m.id,name:m.user.name,surname:m.user.surname,payment_types:m.payment_types.name,item:m}),b({payment_types:m.payment_types}),t(!0)},className:M.cash,children:m?.payment_types?.name})}),e.jsx("td",{children:e.jsx("div",{children:e.jsx(w,{onClick:()=>{c(!0),h({id:m.id,name:m.user.name,surname:m.user.surname,payment_types:m.payment_types.name})},type:"delete",children:e.jsx("i",{className:"fa fa-times",style:{color:"white"}})})})})]})})}));return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:M.empSalary,children:[e.jsxs(E,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"Kasb"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"O'chirish"})]})}),S]}),e.jsxs(K,{active:x,setActive:t,children:[e.jsx("h2",{children:"To'lov turini uzgartirish"}),e.jsx("div",{className:M.changeType,children:e.jsx(N,{options:y,onChangeOption:a})})]})]}),e.jsx(R,{setCurrentTableData:T,users:_,setCurrentPage:k,currentPage:P,pageSize:j,onPageChange:m=>{k(m)},type:"custom"})]})},Xe=({teacherSalary:s,onDelete:r,deleted:d,setChangePayment:o,setChangingData:a,changePayment:x,setActiveDelete:t,changingData:h,activeDelete:c})=>{s?.filter(_=>!_.deleted);const i=p(Q);let y=n.useMemo(()=>50,[]);const[u,l]=n.useState([]),[j,v]=n.useState(1),T=n.useMemo(()=>{const _=s?.slice();return v(1),i?_.filter(O=>O?.teacher?.user?.name?.toLowerCase().includes(i.toLowerCase())):_},[s,v,i]),P=_=>{t(!0)},k=U(),b=u?.map((_,O)=>e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:O+1}),e.jsxs("td",{onClick:()=>k(`../../teacher/teacherProfile/${_?.teacher?.id}`,{relative:"path"}),children:[_?.teacher?.user?.name," ",_?.teacher?.user?.surname]}),e.jsx("td",{children:_?.salary}),e.jsx("td",{children:_?.comment}),e.jsx("td",{children:_?.date}),e.jsx("td",{onClick:()=>{a({id:_?.id,payment:_?.payment}),o(!0)},children:e.jsx("div",{style:{border:"1px solid",width:"fit-content",padding:"5px 10px",borderRadius:"15px",textTransform:"capitalize",cursor:"pointer"},children:_?.payment?.name})}),e.jsx("td",{children:e.jsx("div",{children:e.jsx(w,{onClick:()=>{P({id:_?.id,name:_?.teacher?.user?.name,surname:_?.teacher?.user?.surname}),a({id:_?.id,name:_?.teacher?.user?.name,surname:_?.teacher?.user?.surname})},type:"delete",children:e.jsx("i",{className:"fa fa-times",style:{color:"white"}})})})})]},_.id)}));return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{height:"calc(100vh - 43rem)",overflow:"auto"},children:e.jsxs(E,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sabab"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"O'chirish"})]})}),b]})}),e.jsx(R,{setCurrentTableData:l,users:T,setCurrentPage:v,currentPage:j,pageSize:y,onPageChange:_=>{v(_)},type:"custom"})]})},es=s=>s.accountingSlice?.pages,ss=s=>s.accountingSlice?.activePage,as=s=>s.accountingSlice?.accountingPages,ts=s=>s.accountingSlice?.encashment,ns=s=>s.employerSlice?.employerSalary,rs=s=>s.employerSlice?.loading,cs=s=>s.employerSlice?.deletedEmployerSalary,ls=({teacherSalary:s,formatSalary:r})=>{const o=s?.salary?.map((a,x)=>e.jsxs("tr",{children:[e.jsx("td",{children:x+1}),e.jsxs("td",{children:[a?.name," ",a?.surname]}),e.jsx("td",{children:a?.phone}),e.jsx("td",{children:a?.subject}),e.jsx("td",{children:r(a?.total_salary)}),e.jsx("td",{children:r(a?.taken_salary)}),e.jsx("td",{children:r(a?.remaining_salary)}),e.jsx("td",{children:r(a.cash)}),e.jsx("td",{children:r(a.bank)}),e.jsx("td",{children:r(a.click)})]}));return e.jsx("div",{children:e.jsxs(E,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Telefon numer"}),e.jsx("th",{children:"Fan"}),e.jsx("th",{children:"Umimiy oylik"}),e.jsx("th",{children:"Olingan oylik"}),e.jsx("th",{children:"Qolgan oylik"}),e.jsx("th",{children:"Cash"}),e.jsx("th",{children:"Bank"}),e.jsx("th",{children:"Click"})]})}),e.jsx("tbody",{children:o})]})})},is=({employerSalary:s,formatSalary:r})=>{const o=s?.salary?.map((a,x)=>e.jsxs("tr",{children:[e.jsx("td",{children:x+1}),e.jsxs("td",{children:[a?.name," ",a?.surname]}),e.jsx("td",{children:a?.phone}),e.jsx("td",{children:a?.subject}),e.jsx("td",{children:r(a?.total_salary)}),e.jsx("td",{children:r(a?.taken_salary)}),e.jsx("td",{children:r(a?.remaining_salary)}),e.jsx("td",{children:r(a.cash)}),e.jsx("td",{children:r(a.bank)}),e.jsx("td",{children:r(a.click)})]}));return e.jsx("div",{children:e.jsxs(E,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Telefon numer"}),e.jsx("th",{children:"Fan"}),e.jsx("th",{children:"Umimiy oylik"}),e.jsx("th",{children:"Olingan oylik"}),e.jsx("th",{children:"Qolgan oylik"}),e.jsx("th",{children:"Cash"}),e.jsx("th",{children:"Bank"}),e.jsx("th",{children:"Click"})]})}),e.jsx("tbody",{children:o})]})})},os=({classes:s,extraClass:r,extraClassTable:d,format:o})=>{const x=s?.class?.map((t,h)=>e.jsxs(e.Fragment,{children:[t.students.length>=1?e.jsxs("h2",{className:r,children:[t.class_number," ",t.class_color]}):null,t?.students.map((c,i)=>e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:i+1}),e.jsxs("td",{children:[c.name," ",c.surname]}),e.jsx("td",{children:c.phone}),e.jsx("td",{children:o(c.total_debt)}),e.jsxs("td",{children:["-",o(c.remaining_debt)]}),e.jsx("td",{children:o(c.total_dis)}),e.jsx("td",{children:o(c.total_discount)}),e.jsx("td",{children:o(c.cash)}),e.jsx("td",{children:o(c.bank)}),e.jsx("td",{children:o(c.click)})]})}))]}));return e.jsx("div",{className:d,children:e.jsxs(E,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Tel raqami"}),e.jsx("th",{children:"Oylik qarz"}),e.jsx("th",{children:"Qolgan qarz"}),e.jsx("th",{children:"Chegirma (1-yillik)"}),e.jsx("th",{children:"Chegirma (1-martalik)"}),e.jsx("th",{children:"Cash"}),e.jsx("th",{children:"Bank"}),e.jsx("th",{children:"Click"})]})}),x]})})},ds="_changeType_1ek25_54",hs={changeType:ds},_s={isDelete:!1,isArchive:!1},ms=ee({name:"accountingFilterSlice",initialState:_s,reducers:{fetchIsDelete:(s,r)=>{s.isDelete=r.payload},fetchIsArchive:(s,r)=>{s.isArchive=r.payload}}}),{fetchIsDelete:_a,fetchIsArchive:ma}=ms.actions,us={accountingSlice:Z,multiPageSlice:Ne},ua=()=>{const s=p(es),r=U(),d=A(),[o,a]=n.useState(!1),[x,t]=n.useState(!1),[h,c]=n.useState(!1),[i,y]=n.useState(!1);p(ts);const u=p(ss),l=p(Ce),j=p(se),v=p(ae),T=p(Te);te();const[P,k]=n.useState(!1),[F,b]=n.useState(u??s?.[0]?.value??""),_=localStorage.getItem("selectedBranch");console.log(T,"ffff"),n.useEffect(()=>{d(le({branchID:_})),d(Se())},[]),n.useCallback(S=>{d(ie({value:S}))},[r]),n.useEffect(()=>{l&&l!==j.length&&j.length>=2&&r("./",{relative:"path"})},[l,j?.length]);const O=n.useMemo(()=>[{name:"Students Payments",type:"studentsPayments"},{name:"Teacher Salary",type:"teachersSalary"},{name:"Employer Salary",type:"employeesSalary"},{name:"overhead",type:"overhead"},{name:"capital",type:"capital"}],[]);return n.useEffect(()=>{d(ke({locations:v,types:O}))},[j.length]),console.log(T,"multi"),e.jsx(H,{reducers:us,children:e.jsx(Ve,{data:T})})},xs=({filteredDeletedSalary:s,formatSalary:r,sum2:d,onChange:o})=>{const a=p(Q);let x=n.useMemo(()=>50,[]);const[t,h]=n.useState([]),[c,i]=n.useState(1),y=n.useMemo(()=>{const l=s?.slice();return i(1),a?l.filter(j=>j.name?.toLowerCase().includes(a.toLowerCase())):l},[s,i,a]),u=()=>t?.map((l,j)=>e.jsx(e.Fragment,{children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:j+1}),e.jsx("td",{children:l?.user?.name}),e.jsx("td",{children:l?.salary}),e.jsx("td",{children:l?.date}),e.jsx("td",{children:l?.user?.job?.length?l?.user?.job:"ish turi mavjud emas"}),e.jsx("td",{onClick:()=>o(l.id),children:e.jsx("div",{className:M.cash,children:l?.payment_types?.name})})]})})}));return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:M.empSalary,children:e.jsxs(E,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"Kasb"}),e.jsx("th",{children:"To'lov turi"})]})}),u()]})}),e.jsx(R,{setCurrentTableData:h,users:y,setCurrentPage:i,currentPage:c,pageSize:x,onPageChange:l=>{i(l)},type:"custom"})]})},ps={employerSlice:de},xa=n.memo(({deleted:s,setDeleted:r})=>{const d=A(),[o,a]=n.useState(!1),[x,t]=n.useState(!1),h=p(ns),c=p(cs),i=p(rs),{request:y}=B(),[u,l]=n.useState(!1),j=localStorage.getItem("selectedBranch");n.useEffect(()=>{d(oe(j))},[]);const[v,T]=n.useState({}),P=p(W),k=c?.reduce((S,m)=>S+parseFloat(m.salary||0),0),F=h?.reduce((S,m)=>S+parseFloat(m.salary||0),0),b=S=>Number(S).toLocaleString(),_=S=>{const{id:m}=v;y(`${L}Users/salaries/delete/${m}/`,"DELETE",JSON.stringify(m),$()).then(D=>{l(!u),d(_e({id:m})),d(Y({status:!0,msg:D.msg,type:"success"}))}).catch(D=>{console.log(D)})},O=S=>{const{id:m}=v;y(`${L}Users/salaries/update/${m}/`,"PATCH",JSON.stringify({payment_types:Number(S)}),$()).then(D=>{a(!1),d(he({id:m,payment_types:P.filter(X=>X.id===+S)[0],changingData:v}))}).catch(D=>{console.log(D)})};return i?e.jsx(ne,{}):e.jsx(H,{reducers:ps,children:e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"flex-end",marginBottom:"3rem"},children:e.jsxs("div",{style:{color:"rgb(34, 197, 94)",fontSize:"2.2rem",textAlign:"end"},children:["Total : ",b(s?k:F)]})}),s?e.jsx(xs,{filteredDeletedSalary:c,formatSalary:b}):e.jsx(Ge,{changingData:v,formatSalary:b,filteredSalary:h,setChangingData:T,changePayment:o,activeDelete:u,setActiveDelete:l,setChangePayment:a,getCapitalType:P,onChange:O}),e.jsx(G,{setActive:l,active:u,onClick:_,title:`Rostanham ${v.name} ni o'chirmoqchimisiz `,type:"danger"})]})})}),ys=s=>s.teacher?.teacherSalary,js=s=>s.teacher?.deletedSalary,gs=({deletedTeacher:s,setChangePayment:r,setChangingData:d})=>{const o=p(Q);let a=n.useMemo(()=>50,[]);const[x,t]=n.useState([]),[h,c]=n.useState(1),i=n.useMemo(()=>{const u=s?.slice();return c(1),o?u.filter(l=>l.name?.toLowerCase().includes(o.toLowerCase())):u},[De,c,o]),y=()=>x.map((u,l)=>e.jsx(e.Fragment,{children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:l+1}),e.jsxs("td",{children:[u?.teacher?.user?.name," ",u?.teacher?.user?.surname]}),e.jsx("td",{children:u?.salary}),e.jsx("td",{children:u?.comment}),e.jsx("td",{children:u?.date}),e.jsx("td",{onClick:()=>{d({id:u?.id,payment_types:u?.payment_types})},children:e.jsx("div",{style:{border:"1px solid",width:"fit-content",padding:"5px 10px",borderRadius:"15px",textTransform:"capitalize",cursor:"pointer"},children:u?.payment?.name})})]},l)})}));return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("div",{style:{height:"calc(100vh - 43rem)",overflow:"auto"},children:e.jsxs(E,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sabab"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"To'lov turi"})]})}),y()]})})}),e.jsx(R,{setCurrentTableData:t,users:i,setCurrentPage:c,currentPage:h,pageSize:a,onPageChange:u=>{c(u)},type:"custom"})]})},bs={teacher:ue},pa=({deleted:s,setDeleted:r})=>{const d=A(),o=p(ys),a=p(js),[x,t]=n.useState({}),[h,c]=n.useState(!1),i=p(W),[y,u]=n.useState(!1),l=localStorage.getItem("selectedBranch"),{request:j}=B();n.useEffect(()=>{l&&d(me(l))},[l]);const v=()=>{const{id:b}=x;j(`${L}Teachers/teachers/salary/delete/${b}/`,"DELETE",JSON.stringify({id:b}),$()).then(_=>{d(xe({id:b})),d(Y({status:!0,msg:_.msg,type:"success"})),u(!1)}).catch(_=>{console.log(_)})},T=b=>Number(b).toLocaleString(),P=a?.reduce((b,_)=>b+parseFloat(_.salary||0),0),k=o?.reduce((b,_)=>b+parseFloat(_.salary||0),0),F=b=>{d(pe({id:x.id,payment_types:b})),c(!1)};return e.jsxs(H,{reducers:bs,children:[e.jsx("div",{style:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"flex-end",marginBottom:"3rem"},children:e.jsxs("div",{style:{color:"rgb(34, 197, 94)",fontSize:"2.2rem",textAlign:"end"},children:["Total : ",T(s?P:k)]})}),s?e.jsx(gs,{setChangingData:t,setChangePayment:c,deletedTeacher:a}):e.jsx(Xe,{setChangingData:t,changePayment:h,setChangePayment:c,deleted:s,teacherSalary:o,changingData:x,activeDelete:y,setActiveDelete:u}),e.jsx(G,{setActive:u,active:y,onClick:v,title:`Rostanham ${x.name} ni o'chirmoqchimisiz `,type:"danger"}),e.jsx(K,{active:h,setActive:c,children:e.jsx("div",{className:hs.changeType,children:e.jsx(N,{options:i,onChangeOption:F,title:"Select payment type"})})})]})},fs="_accounting_1omdx_1",vs="_accounting__wrapper_1omdx_4",Ss="_wrapper__filter_1omdx_9",Cs="_wrapper__middle_1omdx_13",Ts="_typeExpenses_1omdx_33",ks="_paymentType_1omdx_50",Ns="_select_1omdx_57",Ds="_tableHeader_1omdx_61",Ps="_table_1omdx_61",As="_otchot__main_1omdx_75",Os="_otchot_1omdx_75",g={accounting:fs,accounting__wrapper:vs,wrapper__filter:Ss,wrapper__middle:Cs,typeExpenses:Ts,paymentType:ks,select:Ns,tableHeader:Ds,table:Ps,otchot__main:As,otchot:Os},Es=s=>s.otchotAccountingSlice?.students,Fs=s=>s.otchotAccountingSlice?.teacherSalary,ws=s=>s.otchotAccountingSlice?.employerSalary,Ms=s=>s.otchotAccountingSlice.all,Ls=({formatSalary:s})=>{const r=A(),d=p(I),o=p(ws),a=d.id;n.useEffect(()=>{r(ye(a))},[]);const[x,t]=n.useState(null),[h,c]=n.useState(null);return e.jsx("div",{children:e.jsxs("div",{children:[e.jsxs("div",{className:g.paymentType,children:[e.jsx(N,{extraClass:g.select,options:o.dates?.map(i=>i.year),onChangeOption:c}),h?e.jsx(N,{extraClass:g.select,options:o.dates.filter(i=>i.year===+h)[0].months,onChangeOption:t}):null]}),e.jsx(is,{formatSalary:s,employerSalary:o})]})})},$s=({formatSalary:s})=>{const r=p(Es),[d,o]=n.useState(null),[a,x]=n.useState(null),t=A(),{register:h,handleSubmit:c}=Pe(),[i,y]=n.useState(null),{request:u}=B(),l=p(I);return n.useEffect(()=>{t(J(l.id)),a&&d&&u(`${L}Encashment/student_payments/?branch=${l.id}`,"POST",JSON.stringify({year:a,month:d}),$()).then(j=>{t(J(l.id)),y(j)}).catch(j=>{t(Y({status:"error",type:!0,msg:"Serverda hatolik"}))})},[a,d]),e.jsxs("div",{children:[e.jsxs("div",{className:g.paymentType,children:[e.jsxs("div",{style:{display:"flex",gap:"2rem"},children:[e.jsx(N,{register:h,extraClass:g.select,name:"year",options:r?.dates?.map(j=>j?.year),onChangeOption:x}),a?e.jsx(N,{register:h,name:"month",extraClass:g.select,options:r?.dates?.filter(j=>j.year===+a)[0]?.months,onChangeOption:o}):null]}),e.jsxs("div",{className:g.otchot__main,children:[e.jsxs("div",{className:g.otchot,children:["Umumiy qarz ",e.jsx("br",{})," ",s(i?i?.total_debt:r?.total_debt)]}),e.jsxs("div",{className:g.otchot,children:["Qolgan qarz ",e.jsx("br",{})," ",s(i?i?.reaming_debt:r?.reaming_debt)]}),e.jsxs("div",{className:g.otchot,children:["Chegirma 1-yillik ",e.jsx("br",{})," ",s(i?i?.total_dis:r?.total_dis)]}),e.jsxs("div",{className:g.otchot,children:["Chegirma 1-martalik  ",e.jsx("br",{})," ",s(i?i?.total_discount:r?.total_discount)]}),e.jsxs("div",{className:g.otchot,children:["Umumiy to'lov ",e.jsx("br",{})," ",s(i?i?.total_sum:r?.total_sum)]})]})]}),e.jsx(os,{format:s,extraClass:g.tableHeader,extraClassTable:g.table,classes:i||r})]})},Is=({formatSalary:s})=>{const r=A(),o=p(I).id,a=p(Fs);n.useEffect(()=>{r(je(o))},[]);const[x,t]=n.useState(null),[h,c]=n.useState(null);return e.jsx("div",{children:e.jsxs("div",{children:[e.jsxs("div",{className:g.paymentType,children:[e.jsx(N,{extraClass:g.select,options:a?.dates?.map(i=>i?.year),onChangeOption:c}),h?e.jsx(N,{extraClass:g.select,options:a.dates.filter(i=>i.year===+h)[0]?.months,onChangeOption:t}):null]}),e.jsx(ls,{formatSalary:s,teacherSalary:a})]})})},zs="_paymentTypes_bhdlr_1",qs="_paymentTypes__item_bhdlr_8",Us="_list_bhdlr_15",Bs="_list__container_bhdlr_24",Rs="_otchot_bhdlr_28",Hs="_header_bhdlr_36",Qs="_header__item_bhdlr_43",Ys="_active_bhdlr_50",C={paymentTypes:zs,paymentTypes__item:qs,list:Us,list__container:Bs,otchot:Rs,header:Hs,header__item:Qs,active:Ys},Js=[{name:"O'quvchilar",value:"student"},{name:"O'qituvchilar",value:"teacher"},{name:"Qo'shimcha harajatlar ",value:"overhead"},{name:"Capital",value:"capital"},{name:"Umumiy foyda",value:"total"}],Vs=({allTable:s})=>{const{request:r}=B(),d=A(),o=p(I),[a,x]=n.useState("student"),[t,h]=n.useState(null),[c,i]=n.useState(null),y=()=>{if(console.log(s?.payment_results),!(!a&&!s?.payment_results))return e.jsx(Ks,{data:s?.payment_results?.[a],activeType:a})};n.useEffect(()=>{if(c&&t){const l={year:t,month:c};r(`${L}Encashment/encashment_school/`,"POST",JSON.stringify({branch:o.id,...l}),$()).then(j=>{d(ge(j)),console.log(j)})}},[o.id,t,c]);const u=l=>{h(l),i(null)};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"2rem"},children:[e.jsx(N,{options:s?.dates?.map(l=>({name:l?.year,id:l?.year})),onChangeOption:u}),t&&e.jsx(N,{options:s?.dates?.filter(l=>l.year===+t)[0]?.months,onChangeOption:i,defaultValue:s?.dates?.filter(l=>l.year===+t)[0]?.months[0]})]}),e.jsx("div",{className:C.header,children:Js.map(l=>e.jsx("div",{className:re(C.header__item,{[C.active]:l.value===a}),onClick:()=>x(l.value),children:l.name},l.value))}),y()]})},Ks=({data:s,activeType:r})=>{const[d,o]=n.useState(null);n.useEffect(()=>{s&&(Array.isArray(s)?o("array"):o("object"))},[s]);const a=n.useCallback(t=>{if(!(!t.length>0))return t.map((h,c)=>{const i=Object.keys(h);return e.jsxs("div",{className:C.paymentTypes__item,children:[e.jsx("h3",{children:h[i[0]]}),e.jsx("p",{children:h[i[1].toLowerCase()]})]},c)})},[]),x=n.useCallback(()=>{if(!(!s&&!d))return Object.entries(s).map((t,h)=>{if(Array.isArray(t[1]))return t[1].map((c,i)=>{const y=Object.keys(c);return e.jsxs("div",{className:C.paymentTypes__item,children:[e.jsx("h3",{children:c[y[0]]}),e.jsx("p",{children:c[y[1].toLowerCase()]})]},i)})})},[s,d]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:C.paymentTypes,children:[d==="array"?a(s):null,x()]}),r==="student"?e.jsx("div",{className:C.list,children:e.jsxs("div",{className:C.list__container,children:[e.jsxs("div",{className:C.otchot,children:["Qolgan qarz ",e.jsx("br",{})," ",s?.remaining_debt]}),e.jsxs("div",{className:C.otchot,children:["Umumiy qarz ",e.jsx("br",{})," ",s?.total_debt]})]})}):r==="teacher"?e.jsx("div",{className:C.list,children:e.jsxs("div",{className:C.list__container,children:[e.jsxs("div",{className:C.otchot,children:["Umumiy oylik ",e.jsx("br",{})," ",s?.total_salary]}),e.jsxs("div",{className:C.otchot,children:["Qolgan oylik ",e.jsx("br",{})," ",s?.remaining_salary]})]})}):null]})},Zs=()=>{const s=A(),r=p(I),d=p(Ms);n.useEffect(()=>{s(be({branchId:r.id}))},[]);const[o,a]=n.useState(null),[x,t]=n.useState(null);return e.jsx("div",{children:e.jsx(Vs,{allTable:d})})},Ws={otchotAccountingSlice:ve,accountingSlice:Z},ya=()=>{const s=c=>Number(c).toLocaleString(),r=p(as),[d,o]=n.useState(!1),a=A(),x=localStorage.getItem("selectedBranch"),t=U(),h=n.useCallback(c=>{a(fe({value:c})),t(`${c}`,{relative:"path"})},[t]);return e.jsx(H,{reducers:Ws,children:e.jsxs("div",{className:g.accounting,children:[e.jsxs("div",{className:g.accounting__wrapper,children:[e.jsxs("div",{className:g.wrapper__filter,children:[e.jsx(w,{type:"filter",status:"filter",onClick:()=>o(!d),children:"Filter"}),e.jsx(N,{defaultValue:r[0]?.value,options:r,onChangeOption:h})]}),e.jsx("div",{className:g.wrapper__middle,children:e.jsxs("div",{className:g.typeExpenses,children:[e.jsx(V,{to:`../inkasatsiya/${x}`,children:e.jsx(w,{children:"Inkasatsiya"})}),e.jsx(V,{to:"../accounting",children:e.jsx(w,{type:"filter",children:"buxgalteriya"})})]})})]}),e.jsxs(ce,{children:[e.jsx(z,{path:"all",element:e.jsx(Zs,{})}),e.jsx(z,{path:"payment",element:e.jsx($s,{formatSalary:s})}),e.jsx(z,{path:"teacherSalary",element:e.jsx(Is,{formatSalary:s})}),e.jsx(z,{path:"employerSalary",element:e.jsx(Ls,{formatSalary:s})})]})]})})};export{ya as AccountingOtchotPage,ua as AccountingPageMain,xa as EmployerSalaryPage,pa as TeacherSalaryPage};
