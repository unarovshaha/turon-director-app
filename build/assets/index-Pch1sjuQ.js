import{u as N,j as e,I as T,d as q,c as w,e as P,A,h as M,T as m,a as p,r as j,b as O,z as R,g as E,au as $,av as u}from"./index-CkEM-py_.js";import{R as F}from"./radio-D3ROTTQE.js";import"./editableCard-Dy1LjvYe.js";import"./pagination-rjxYsEo1.js";import{o as D}from"./otchotAccountingSlice-CxwCZE98.js";import{f as H,i as L}from"./capitalSelector-C9wvmKkJ.js";import"./confirmModal-C-ANFt90.js";const U="_accounting_1y3qh_1",z="_accounting__payment_1y3qh_12",B="_accounting__header_1y3qh_12",v={accounting:U,accounting__payment:z,accounting__header:B},J=({paymentType:t,setSelectedRadio:r,ot:s,to:h,setOt:n,setTo:a,radio:c,onChange:b})=>(N(),e.jsxs("div",{className:v.accounting,children:[e.jsxs("div",{className:v.accounting__header,children:[e.jsx(T,{type:"date",name:"ot",onChange:d=>n(d.target.value),value:s?.ot}),e.jsx(T,{type:"date",name:"do",onChange:d=>a(d.target.value),value:h?.to})]}),e.jsx("div",{className:v.accounting__payment,children:t.map(d=>e.jsx(F,{children:d.name,checked:c===d.id,onChange:()=>r(d.id)}))})]})),G="_ul_3qyer_1",K="_other__item_3qyer_10",Q="_active_3qyer_17",g={ul:G,other__item:K,active:Q},V=({filter:t,activeMenu:r,setPage:s,setActive:h})=>e.jsx("ul",{className:g.ul,children:t.map((n,a)=>e.jsx("li",{className:q(g.other__item,{[g.active]:r===n.name}),onClick:()=>{s(n.name),h(n.name)},children:n.label},a))}),W=w("inkasatsiyaSlice/inkasatsiyaThunk",async({res:t,branchId:r})=>{const{request:s}=P();return await s(`${A}Encashment/encashment/?branch=${r}/`,"POST",JSON.stringify(t),M())}),X=({students:t,extraClass:r,formatSalary:s})=>{const n=t?.students?.student_data?.map((a,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:c+1}),e.jsxs("td",{children:[a.name,"  ",a.surname]}),e.jsx("td",{children:a.payment_type_name}),e.jsx("td",{children:s(a.payment_sum)}),e.jsx("td",{children:a.date})]}));return e.jsx("div",{className:r,children:e.jsxs(m,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"To'lov"}),e.jsx("th",{children:"Sana"})]})}),e.jsx("tbody",{children:n})]})})},Y=t=>t.inkasatsiyaSlice.inkasatsiya,Z=({overhead:t,extraClass:r,formatSalary:s})=>{const n=t?.overheads?.overhead_data?.map((a,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:c+1}),e.jsx("td",{children:a.name}),e.jsx("td",{children:a.payment.name}),e.jsx("td",{children:s(a.price)}),e.jsx("td",{children:a.created})]}));return e.jsx("div",{className:r,children:e.jsxs(m,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Nomi"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"Narxi"}),e.jsx("th",{children:"Sana"})]})}),e.jsx("tbody",{children:n})]})})},ee=({capital:t,extraClass:r,formatSalary:s})=>{const n=t?.capitals?.capital_data?.map((a,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:c+1}),e.jsx("td",{children:a.name}),e.jsx("td",{children:a.payment_type.name}),e.jsx("td",{children:s(a.price)}),e.jsx("td",{children:a.added_date})]}));return e.jsx("div",{className:r,children:e.jsxs(m,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Nomi"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"Narxi"}),e.jsx("th",{children:"Sana"})]})}),e.jsx("tbody",{children:n})]})})},ae=({teacher:t,extraClass:r,formatSalary:s})=>{console.log(t,"teacabsdh abshd");const n=t?.teachers?.teacher_data?.map((a,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:c+1}),e.jsxs("td",{children:[a.name," ",a.surname]}),e.jsx("td",{children:a.payment_type_name}),e.jsx("td",{children:s(a.salary)}),e.jsx("td",{children:a.date})]}));return e.jsx("div",{className:r,children:e.jsxs(m,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sana"})]})}),e.jsx("tbody",{children:n})]})})},te=({workers:t,extraClass:r,formatSalary:s})=>{const n=t?.workers?.worker_data?.map((a,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:c+1}),e.jsxs("td",{children:[a.name," ",a.surname]}),e.jsx("td",{children:a.payment_type_name}),e.jsx("td",{children:s(a.salary)}),e.jsx("td",{children:a.date})]}));return e.jsx("div",{className:r,children:e.jsxs(m,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sana"})]})}),e.jsx("tbody",{children:n})]})})},se="_overalMain_1211f_1",ne="_overal_1211f_1",re="_inkasatsiya_1211f_17",le="_table_1211f_28",o={overalMain:se,overal:ne,inkasatsiya:re,table:le},k=[{name:"studentsPayments",label:"student payment"},{name:"teachersSalary",label:"teacher salary"},{name:"employeesSalary",label:"employer salary"},{name:"overhead",label:"overhead"},{name:"capital",label:"capital"}],ue=()=>{const t=N(),r=p(H),[s,h]=j.useState(k[0].name),n=O();let{locationId:a}=R();const[c,b]=j.useState([]),[d,S]=j.useState([]),l=p(Y),[y,f]=j.useState([]),_=p(E);j.useEffect(()=>{if(c.length&&d.length&&y>0){const x={do:c,ot:d,payment_type:y,branch:_.id};t(W({res:x,branchId:_.id}))}t(L())},[c,d,y,_]);const i=x=>Number(x).toLocaleString(),C=()=>{switch(s){case"studentsPayments":return e.jsxs("h2",{children:["o'quvchilarning umimiy to'lovi : ",l?.students?.student_total_payment?i(l?.students?.student_total_payment):0," "]});case"teachersSalary":return e.jsxs("h2",{children:["O'qituvchilarning umumiy to'lovi : ",l?.teachers?.teacher_total_salary?i(l?.teachers?.teacher_total_salary):0," "]});case"employeesSalary":return e.jsxs("h2",{children:["Ishchilarning umumiy to'lovi : ",l?.workers?.worker_total_salary?i(l?.workers?.worker_total_salary):0," "]});case"overhead":return e.jsxs("h2",{children:["overheadning umumiy to'lovi : ",l?.overheads?.total_overhead_payment?i(l?.overheads?.total_overhead_payment):0," "]});case"capital":return e.jsxs("h2",{children:["capitalning umumiy to'lovi : ",l?.capitals?.total_capital?i(l?.capitals?.total_capital):0]})}},I=j.useCallback(x=>{t(D({value:x})),n(`./${x}`)},[n]);return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2rem",padding:"2rem"},children:[l.overall?e.jsxs("div",{className:o.overalMain,children:["Umumiy : ",i(l.overall)]}):null,e.jsxs("div",{className:o.overal,children:[C(),e.jsx("div",{className:o.inkasatsiya,children:e.jsx(J,{activeMenu:s,paymentType:r,to:c,setTo:b,ot:d,setOt:S,setSelectedRadio:f,radio:y})})]}),e.jsx(V,{activeMenu:s,setActive:h,setPage:I,filter:k}),e.jsxs($,{children:[e.jsx(u,{path:"teachersSalary",element:e.jsx(ae,{formatSalary:i,extraClass:o.table,teacher:l,path:"teachersSalary",locationId:a})}),e.jsx(u,{path:"employeesSalary",element:e.jsx(te,{formatSalary:i,extraClass:o.table,path:"employeesSalary",workers:l,locationId:a})}),e.jsx(u,{path:"overhead",element:e.jsx(Z,{formatSalary:i,extraClass:o.table,overhead:l,path:"overhead",locationId:a})}),e.jsx(u,{path:"studentsPayments",element:e.jsx(X,{formatSalary:i,extraClass:o.table,students:l,locationId:a})}),e.jsx(u,{path:"capital",element:e.jsx(ee,{formatSalary:i,extraClass:o.table,capital:l,path:"capital",locationId:a})})]})]})};export{ue as Inkasatsiya};
